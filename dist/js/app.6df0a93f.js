(function(t){function e(e){for(var n,s,o=e[0],c=e[1],l=e[2],u=0,h=[];u<o.length;u++)s=o[u],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&h.push(i[s][0]),i[s]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);d&&d(e);while(h.length)h.shift()();return r.push.apply(r,l||[]),a()}function a(){for(var t,e=0;e<r.length;e++){for(var a=r[e],n=!0,o=1;o<a.length;o++){var c=a[o];0!==i[c]&&(n=!1)}n&&(r.splice(e--,1),t=s(s.s=a[0]))}return t}var n={},i={app:0},r=[];function s(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=t,s.c=n,s.d=function(t,e,a){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(a,n,function(e){return t[e]}.bind(null,n));return a},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var d=c;r.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"002e":function(t,e,a){},"012e":function(t,e,a){},"0c23":function(t,e,a){"use strict";var n=a("3092"),i=a.n(n);i.a},"0c81":function(t,e,a){"use strict";var n=a("f8c1"),i=a.n(n);i.a},"17dc":function(t,e,a){"use strict";var n=a("90c6"),i=a.n(n);i.a},2506:function(t,e,a){},"2aea":function(t,e,a){"use strict";var n=a("69d0"),i=a.n(n);i.a},3092:function(t,e,a){},"30ec":function(t,e,a){"use strict";var n=a("d78f"),i=a.n(n);i.a},"31ba":function(t,e,a){"use strict";var n=a("77d5"),i=a.n(n);i.a},"35be":function(t,e,a){"use strict";var n=a("012e"),i=a.n(n);i.a},"3e60":function(t,e,a){"use strict";var n=a("f27c"),i=a.n(n);i.a},4400:function(t,e,a){"use strict";var n=a("2506"),i=a.n(n);i.a},5462:function(t,e,a){"use strict";var n=a("002e"),i=a.n(n);i.a},"56d7":function(t,e,a){"use strict";a.r(e);var n={};a.r(n),a.d(n,"vuexStore",(function(){return x})),a.d(n,"parsedSearch",(function(){return b})),a.d(n,"loadTree",(function(){return C})),a.d(n,"loadConfig",(function(){return O})),a.d(n,"deleteConfig",(function(){return N})),a.d(n,"tablesFromConnection",(function(){return j})),a.d(n,"getListColumnSql",(function(){return q})),a.d(n,"getListModel",(function(){return M})),a.d(n,"getLiteral",(function(){return E})),a.d(n,"getFieldsForTable",(function(){return P})),a.d(n,"getIdentitiesForTableSet",(function(){return V})),a.d(n,"$fieldsForTable",(function(){return z})),a.d(n,"getTableConnectionId",(function(){return H})),a.d(n,"getTablesRelation",(function(){return I})),a.d(n,"getDirectParents",(function(){return U})),a.d(n,"getDirectSuns",(function(){return Q})),a.d(n,"saveTree",(function(){return W})),a.d(n,"saveCircusConfig",(function(){return G})),a.d(n,"listFiles",(function(){return Z})),a.d(n,"getTablesList",(function(){return X})),a.d(n,"$dbq",(function(){return Y})),a.d(n,"keepDBConnAlive",(function(){return tt})),a.d(n,"downloadExcel",(function(){return et}));a("ac1f"),a("841c"),a("e260"),a("e6cf"),a("cca6"),a("a79d");var i=a("2b0e"),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{overflow:"hidden",background:"transparent"},attrs:{id:"circus"}},[a("contextDialog",{directives:[{name:"show",rawName:"v-show",value:t.contextDialog.show,expression:"contextDialog.show"}],attrs:{componentName:"contextFieldEditor",componentProps:t.contextDialog.props}}),a("div",{directives:[{name:"show",rawName:"v-show",value:t.showHelpState,expression:"showHelpState"}],staticClass:"panel-envelope",staticStyle:{height:"auto",width:"auto",background:"transparent","font-weight":"500","font-size":"11px",position:"absolute",bottom:"0","z-index":"100","align-self":"flex-end"}},[a("div",{ref:"helpCuadrant",staticStyle:{height:"50%",width:"100%",background:"white"},domProps:{innerHTML:t._s(t.helpText)}}),a("div",{staticClass:"custom-title",staticStyle:{position:"absolute",width:"176px","margin-top":"-20px",display:"none"}},[t._v("LOG")]),a("div",{ref:"logCuadrant",staticStyle:{height:"50%",width:"100%","overflow-y":"auto","overflow-x":"none",display:"none"}},t._l(t.logText,(function(e){return a("div",{staticStyle:{"margin-bottom":"7px"},domProps:{innerHTML:t._s(e)}})})),0)]),a("ly",{staticStyle:{position:"relative"},attrs:{flexbox:"1",column:"1",height:"1"}},[a("ly",{directives:[{name:"show",rawName:"v-show",value:t.show.formlist,expression:"show.formlist"}],ref:"contents",staticStyle:{height:"70%",position:"relative","z-index":"10",border:"0px solid red"},attrs:{width:"1",grow:"1",id:"containers"}},[a("ly",{attrs:{flexbox:"1",height:"1"}},[a("ly",{attrs:{grow:"1",height:"1"}},[a("ly",{attrs:{flexbox:"1",column:"1",height:"1"}},t._l(t.visibleAreas,(function(e){return a("ly",{style:t.areaHeight,attrs:{grow:"1"}},[a("Containers",{attrs:{containers:t.containersFromArea(e),panels:t.panels},on:{panelSwitch:t.panelSwitch}})],1)})),1)],1)],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:t.panels.bottom&&t.admin,expression:"panels.bottom&&admin"}],style:{display:"flex",height:t.show.formlist?"30%":"100%"}},[a("div",{staticClass:"panel-envelope",staticStyle:{"flex-grow":"1",height:"100%",border:"0px solid red","max-height":"calc(100% - 0px)",position:"relative","min-width":"100%"},attrs:{id:"queriesList"}},[a("button",{staticStyle:{position:"absolute",top:"15px",right:"15px",padding:"3px","z-index":"1"},on:{click:function(e){t.show.formlist=!t.show.formlist}}},[a("div",{class:{"arrow-up":t.show.formlist,"arrow-down":!t.show.formlist}})]),a("SimpleTable",{staticStyle:{border:"1px solid gray","border-width":"0px 0",padding:"5px"},attrs:{nowrap:!1,searchable:!0,editablekeys:["Nombre"],hiddenKeys:["id"],rows:t.queries,actions:t.gridActions,cellMaxHeight:"40px"},on:{rowEdit:t.queriesTableOnChange,rowClick:t.queriesRowClick}})],1)])],1),a("ContextList")],1)},s=[],o=(a("99af"),a("4de4"),a("7db0"),a("4160"),a("c975"),a("d81d"),a("a434"),a("b0c0"),a("b64b"),a("d3b7"),a("25f0"),a("5319"),a("1276"),a("159b"),a("53ca")),c=(a("a4d3"),a("e01a"),a("d28b"),a("a15b"),a("3ca3"),a("ddb0"),a("2909")),l=a("5530"),d=a("c437"),u=a.n(d),h=a("2f62"),f={strict:!1,mutations:{setKey:function(t,e){var a=e.path,n=e.val,i=t;a.forEach((function(t,e){e<a.length-1?i=i[t]:n?i[t]=n:delete i[t]}))},setContainerType:function(t,e){var a=e.index,n=e.type;console.log({index:a,type:n}),t.containers[a].type=n},setVentana:function(t,e){var a=e.index;e.data;console.log(a)},Query_add:function(t,e){var a=e.query,n=e.cb,i={operation:"insert",columns:["v_nombre","v_identificador","v_fecha","v_json"],schemaSyntax:"views",language:"spanish",values:[a.customName,a.name,a.fecha,JSON.stringify(a)],dbID:"circus"};Y(i,n)},Query_setKey:function(t,e){var a,n=e.id,i=e.key,r=e.value;switch(i){case"customName":a="v_nombre";break}var s={operation:"update",columns:[a],schemaSyntax:"circus.dbo.views",language:"spanish",values:[r],whereSyntax:"v_id="+n};Y(s)},Query_delete:function(t,e){var a={operation:"delete",schemaSyntax:"circus.dbo.views",language:"spanish",whereSyntax:"v_id="+e};console.log(a),Y(a)},database_setLiteral:function(t,e){var a=e.key,n=e.literal;t.database.literales[a]=n},Ventana_setVisibility:function(t,e){var a=e.indexVentana,n=e.visible;t.ventanas.data.forEach((function(t){return t.visible=!1})),t.ventanas.data[a].visible=n},Ventana_clone:function(t,e){var a=e.index;t.ventanas.data.push(JSON.cc(t.ventanas.data[a]))},Ventana_delete:function(t,e){var a=e.index;t.ventanas.data.splice(a,1)},Ventana_injectQE:function(t,e){var a=e.indexVentana,n=e.qeParams;t.ventanas.data[a].queryeditor.parameters=n},Ventana_setName:function(t,e){var a=e.indexVentana,n=e.ventanaName;t.ventanas.data[a].name=n},Ventana_setTable:function(t,e){var a=e.indexVentana,n=e.tableName;t.ventanas.data[a].table=n},Ventana_setFields:function(t,e){var a=e.indexVentana,n=e.fields,i=e.identities;t.ventanas.data[a].identities=i,t.ventanas.data[a].fields=n},ContextMenu_open:function(t,e){t.contextMenu=JSON.cc(e)},ContextMenu_clear:function(t){t.contextMenu={}},ContextMenu_formUpdate:function(t,e){t.contextMenu.item=e},ContextMenu_commit:function(t){var e=t.contextMenu.cursor,a=t.contextMenu.item,n=new objeto(t).get(e);log(a),Object.assign(n,a)},checked_assign:function(t,e){var a=e.indexVentana,n=e.ids;t.ventanas.data[a].list.checkedIds=n},set_distinct:function(t,e){var a=e.indexVentana,n=e.value;t.ventanas.data[a].queryeditor.distinct=n,console.log(t.ventanas.data[a].queryeditor)},log:function(t,e){t.log||(t.log=[]);var a=new Date,n=a.toLocaleString("en-GB",{timeZone:"UTC"});t.log.unshift(n+"<br>"+e)}},getters:{ventanas:function(t){return t.ventanas.data},ventana:function(t,e){return function(t){return e.ventanas[t]}},qeParams:function(t,e){return function(e){return t.ventanas.data[e].queryeditor.parameters}}},actions:{setVentana:function(t,e){t.getters;var a=t.commit;a("setVentana",{index:e,data:"juan"})},"context-menu":function(t,e){var a=t.commit,n=(t.state,e.action),i=e.item,r=e.cursor,s=e.title,o=e.branchs,c=e.keysSettings;switch(n){case"open":new objeto(i).toArray();var l={item:i,cursor:r,title:s,branchs:o,keysSettings:c};a("ContextMenu_open",l);break;case"formChange":a("ContextMenu_formUpdate",i);break;case"save":a("ContextMenu_commit");break;case"clear":a("ContextMenu_clear");break}}}},p=f,v=a("72bf"),g=a.n(v);i["a"].use(h["a"]);var m,x,b=g.a.parse(location.search),w=b.api;console.log(w);var y={connNameToDbName:{}};$.ajax({url:w+"services",data:"",method:"POST",async:!1,success:function(t){var e=JSON.parse(JSON.parse(t)),a={};Object.keys(e).forEach((function(t){a[t.toLocaleLowerCase()]=e[t]})),Object.assign(y.connNameToDbName,a)},error:function(t){console.log("error en services json")}});var S="puta";if($.ajax({url:w+"circusConfig",data:"",method:"POST",async:!1,success:function(t){S=JSON.parse(JSON.parse(t))},error:function(t){console.log("error en circusConfig json")}}),b.reset){var k;k=1==b.reset?"circus.json":b.reset,C((function(t){T(t),console.log("Model loaded from "+k)}),k)}else{try{m=JSON.parse(localStorage["vuexStore"])}catch(ja){alert("No se ha encontrado Cookie de configuración local.\n\nCargando configuración del servidor..."),location=window.location.href+"&reset=1"}T(m)}function C(t,e){$.ajax({url:b.api+"readFile",data:{fileName:e},method:"POST",async:!1,success:function(e){var a=JSON.parse(e);t(a)}})}function O(t){location="./?api="+w+"&dev=1&admin=1&reset="+t}function N(t,e){$.ajax({url:b.api+"deleteFile",data:{fileName:t},method:"POST",async:!1,success:function(t){e(t)}})}function T(t){var e=Object(l["a"])({state:Object(l["a"])({},t)},p);e.state.database=S,x=new h["a"].Store(e),localStorage["vuexStore"]=JSON.stringify(e.state),console.log(S),x.subscribe((function(t,e){var a=Object(l["a"])({},e);localStorage["vuexStore"]=JSON.stringify(a),console.log(JSON.cc(a))}))}var L=JSON.parse(localStorage["vuexStore"]);function j(t){return[["clientes","clientes"],["polizas","polizas"],["recibos","recibos"],["colaboradores","colaboradores"]]}function q(t,e){var a=M(t);if(!a)return t;if(a.length){if(e)return t;var n="(case ".concat(t);return a.forEach((function(t){var e=t[0],a=t[1];n+=" when ".concat(e," then '").concat(a,"' ")})),n+="end)",n}if(a&&!a.length){var i=a.sqlValueFromId.replace("{{id}}",t),r="(".concat(i,")");return r}}function M(t){var e=L.database.listsModels,a=L.database.lists,n=a[t],i=JSON.cc(e[n]);return i}function E(t){var e=L.database.literales;if(e[t])return e[t];var a=L.database.computedFields,n=a.filter((function(e){return-1!=e.sql.indexOf(t)}));if(n.length)return n[0].literal;var i=t.split(".");return i[i.length-1]}function P(t,e){z(t,(function(t){var a=t.filter((function(t,e){return t.is_identity})).map((function(t){return t.column_name}));e({fields:t,identities:a})}))}function V(t,e){console.log("getIdentitiesForTableSet"),z(t,(function(t){var a=t.filter((function(t,e){return t.is_identity})).map((function(t){return{column_name:t.column_name,table_name:t.table_name}}));e(a)}))}function z(t,e){var a=I(t).names,n=[],i=[];function r(t){var a=i[t];a.then((function(a){n.push.apply(n,Object(c["a"])(a)),t<i.length-1?r(t+1):e(n)}))}a.forEach((function(t){var e=t.split("."),a=(e.length>1&&"".concat(e[0],".").concat(e[1],"."),e.length>1?e[2]:t),n=H(t),r=new Promise((function(e,i){Y({operation:"sp",sp_name:"sp_circus_fields '".concat(a,"'"),dbID:n},(function(n){var i=JSON.parse(JSON.stringify(n)),r=L.database.tables[t].pkname?L.database.tables[t].pkname:"",s=L.database.computedFields;s.forEach((function(e){var n=e.table;n.toLowerCase()==a.toLowerCase()&&i.push({CHARACTER_MAXIMUM_LENGTH:10,column_name:e.sql,data_type:e.type,is_identity:!1,table_name:t,literal:e.literal})})),i.forEach((function(t){var e=F(t.column_name,t.table_name);Object.assign(t,{dbsettings:e,form:{group:"grupo2"},list:{order:"",position:"1"}}),t.column_name.toLowerCase()==r.toLowerCase()&&(t.is_identity=!0),t.is_identity&&(t.list.position="0")})),e(i)}))}));i.push(r)})),r(0)}function F(t,e){L.database.tables[e.toLowerCase()];var a=L.database.lists,n={},i=a[e+"."+t];return n.list=L.database.listsModels[i],n}function H(t,e){var a=!1;return Object.keys(L.database.tables).forEach((function(n){if(n.toLocaleLowerCase()==t.toLocaleLowerCase()){var i=L.database.tables[n].connection;a=e?y.connNameToDbName[i.toLowerCase()]:i}})),a}function I(t){var e=H(t,1),a={names:[t],joinSyntax:K(e)+".dbo."+K(t)},n=J(t);a.joinSyntax+=n.joinSyntax;var i=n.names;do{var r=i;i=[];var s=!0,o=!1,c=void 0;try{for(var l,d=r[Symbol.iterator]();!(s=(l=d.next()).done);s=!0){t=l.value;var u=J(t,a.names.concat(r));i=i.concat(u.names),a.names.push(t),a.joinSyntax+=u.joinSyntax}}catch(ja){o=!0,c=ja}finally{try{s||null==d.return||d.return()}finally{if(o)throw c}}}while(i.length);return B=-1,R=[],a}var D=["a","b","c","d","e","f","g","h","i"],R=[],B=-1;function A(){return B++,D[B]}function J(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a={names:[],joinSyntax:""},n=L.database.tables,i=n[t],r=[];if(!i)return a;var s="",o=i.relatedTables?i.relatedTables:{};return Object.keys(o).filter((function(t){return-1==e.indexOf(t)})).forEach((function(e,a){var n=o[e],i=n.remoteField,c=n.localField,l=K(H(e,1)),d=K(H(t,1)),u=o[e].join?o[e].join:"INNER JOIN",h="".concat(l,".dbo.").concat(K(e)),f=v(e)?A():"",p=""!=f?f:h;function v(t){return-1!=R.indexOf(t)}v(e)||(s+=" ".concat(u," ").concat(h," ").concat(f," ON ").concat(d,".dbo.").concat(K(t),".").concat(c," =  ").concat(p,".").concat(i)),r.push(e),R.push(e)})),a.names=r,a.joinSyntax=s,a}function K(t){var e=t.split("."),a=e.length>1?e[e.length-1]:t;return a}function U(t){var e=L.database.tables[t].relatedTables,a=e||{};return a}function Q(t){var e=L.database.tables,a=Object.keys(e).filter((function(a){var n=e[a];if(!n.relatedTables)return!1;var i=Object.keys(n.relatedTables).map((function(t){return t.toLowerCase()}));return-1!=i.indexOf(t.toLowerCase())})),n={};return a.forEach((function(a){n[a]=e[a].relatedTables[t]})),n}function W(t,e){if(e){var a=window.prompt("Introduzca el nombre que quiere dar al archivo de configuración",t);if(!a)return!1;t=a+(-1==a.indexOf(".json")?".json":"")}return t||(t=u()()+".json"),$.ajax({url:w+"writeFile",data:{json:localStorage["vuexStore"],fileName:t},method:"POST",success:function(e){console.log("Model saved to "+t)}}),t}function G(){return S=JSON.parse(localStorage["vuexStore"]).database,$.ajax({url:w+"writeConfig",data:{json:JSON.stringify(S,null,2)},method:"POST",success:function(t){console.log("Circus config saved.")}}),k}function Z(t,e){$.ajax({url:w+"listFiles",data:{folder:t},method:"POST",success:function(t){e(JSON.parse(t))}})}function X(t){var e=[],a=[],n=y.connNameToDbName,i=0;function r(){a[i].then((function(n){i++,i<a.length?r():t(e)}),(function(t){}))}Object.keys(n).forEach((function(t){var i=t;n[i];a.push(new Promise((function(t,a){Y({columns:["name"],schemaSyntax:"sys.tables",dbID:i,whereSyntax:"name is not null"},(function(a){e.push({label:i,content:a.map((function(t){return t.name}))}),t("all cool")}))})))})),r()}function Y(t,e,a,n){t.language="spanish",a||(a=!0);var i=n?"request":"dbq";$.ajax({url:w+i,data:"params=".concat(encodeURIComponent(JSON.stringify(t))),method:"POST",async:a,success:function(t){var a=JSON.parse(t);a.length&&a[0].Error&&(console.log(JSON.stringify(a[0])),alert(JSON.stringify(a[0]))),e&&e(a)},error:function(t){console.log(t)}})}function tt(){$.ajax({url:w+"ping",data:"dbID=visual",method:"POST",success:function(t){console.log("ping")},error:function(t){console.log("error ajax ping")}})}function et(t,e){window.open(w+"downloadExcel?"+"params=".concat(encodeURIComponent(JSON.stringify(t)),"&types=").concat(encodeURIComponent(JSON.stringify(e))))}var at=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"contextList",style:{"max-height":"300px",border:"0px solid #ddd","border-width":"1px",position:"absolute","z-index":5e4,left:t.left+"px",top:t.top+"px",display:"none",background:"#f2f2f2","box-sizing":"border-box",background:"#f2f2f2",height:"auto"},attrs:{id:"circusContextList"}},[a("div",{staticStyle:{clear:"both",float:"none",width:"100%",border:"0px solid red",height:"21px","padding-top":"1px"}},[a("button",{staticStyle:{float:"left"},attrs:{"data-help-code":"context-list-button-empty"},on:{click:function(e){return t.contextListButton("empty")}}},[a("svg",{staticStyle:{"enable-background":"new 0 0 50.613 50.613",zoom:"0.6","margin-left":"-4px","margin-top":"3px"},attrs:{version:"1.1",id:"Capa_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:"50.613px",height:"50.613px",viewBox:"0 0 50.613 50.613","xml:space":"preserve"}},[a("g",[a("g",[a("g",[a("circle",{attrs:{cx:"22.724",cy:"43.575",r:"4.415"}}),t._v(" "),a("circle",{attrs:{cx:"41.406",cy:"43.63",r:"4.415"}}),t._v(" "),a("path",{attrs:{d:"M46.707,32.312H20.886L10.549,2.568H2.5c-1.381,0-2.5,1.119-2.5,2.5s1.119,2.5,2.5,2.5h4.493L17.33,37.312h29.377\t\t\t\tc1.381,0,2.5-1.119,2.5-2.5S48.088,32.312,46.707,32.312z"}})])])]),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g")])]),a("button",{staticStyle:{float:"left"},attrs:{"data-help-code":"context-list-button-filled"},on:{click:function(e){return t.contextListButton("filled")}}},[a("svg",{staticStyle:{"enable-background":"new 0 0 50.613 50.613",zoom:"0.6","margin-left":"-4px","margin-top":"3px"},attrs:{version:"1.1",id:"Capa_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:"50.613px",height:"50.613px",viewBox:"0 0 50.613 50.613","xml:space":"preserve"}},[a("g",[a("g",[a("g",[a("path",{attrs:{d:"M49.569,11.145H20.055c-0.961,0-1.508,0.743-1.223,1.661l4.669,13.677c0.23,0.738,1.044,1.336,1.817,1.336h19.35\t\t\t\tc0.773,0,1.586-0.598,1.814-1.336l4.069-14C50.783,11.744,50.344,11.145,49.569,11.145z"}}),t._v(" "),a("circle",{attrs:{cx:"22.724",cy:"43.575",r:"4.415"}}),t._v(" "),a("circle",{attrs:{cx:"41.406",cy:"43.63",r:"4.415"}}),t._v(" "),a("path",{attrs:{d:"M46.707,32.312H20.886L10.549,2.568H2.5c-1.381,0-2.5,1.119-2.5,2.5s1.119,2.5,2.5,2.5h4.493L17.33,37.312h29.377\t\t\t\tc1.381,0,2.5-1.119,2.5-2.5S48.088,32.312,46.707,32.312z"}})])])]),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g")])])]),"list"==t.type?a("SimpleTable",{attrs:{rows:t.rows,hiddenKeys:t.hiddenKeys,checkable:!0,searchable:!0,selectable:!1,showHeaders:!1,checkedRows:t.checkedRows,singlecheck:t.singlecheck,searchString:t.searchString},on:{rowClick:t.contextListRowClick,checkClick:t.contextListCheckClick}}):"date"==t.type||"number"==t.type?a("div",{staticStyle:{width:"100%",height:"100%",background:"white",padding:"5px",border:"1px solid #ddd"}},[a("div",{ref:"contextList_rango",staticStyle:{"min-width":"100px"}},[a("label",{staticStyle:{"font-weight":"normal"}},[t._v("Desde")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.leftVal,expression:"leftVal"}],ref:"desde",staticClass:"form-control",attrs:{"data-help-code":"search-parameter-value"},domProps:{value:t.leftVal},on:{blur:function(e){return t.contextListKeyUp()},input:function(e){e.target.composing||(t.leftVal=e.target.value)}}}),a("label",{staticStyle:{"font-weight":"normal"}},[t._v("Hasta")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.rightVal,expression:"rightVal"}],ref:"hasta",staticClass:"form-control",attrs:{"data-help-code":"search-parameter-value"},domProps:{value:t.rightVal},on:{blur:function(e){return t.contextListKeyUp()},input:function(e){e.target.composing||(t.rightVal=e.target.value)}}})])]):t._e()],1)},nt=[],it=(a("498a"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"simple_table_vue",staticClass:"simple-table-vue",style:{width:"100%",height:"100%","max-height":"inherit",overflow:"hidden","box-sizing":"border-box",position:"relative"}},[a("div",{ref:"scrollableDiv",style:{height:"100%","overflow-x":t.overflow,"overflow-y":"scroll","max-height":"inherit"},attrs:{id:"scrollableDiv"},on:{scroll:t.scrollHeaders}},[a("table",{staticClass:"table table-condensed header"},[a("tbody",{ref:"header",style:{position:"absolute"}},[t.showHeaders?a("tr",[t.checkable&&t.editedRows.length?a("td",{staticStyle:{"text-align":"center"}},[a("input",{attrs:{type:"checkbox"},on:{click:function(e){return t.allChecksClick(e)}}})]):t._e(),t._l(t.keys,(function(e,n){return a("td",{attrs:{"data-order":t.getOrder(e)},on:{click:function(a){return t.headerClick(e,a.target,n)}}},[t._v(t._s(e))])}))],2):t._e(),t.searchable?a("tr",[t.checkable?a("td"):t._e(),t._l(t.keys,(function(e,n){return a("td",[a("div",{staticStyle:{width:"100%",cursor:"text"},attrs:{contenteditable:"true",id:e},on:{keyup:function(e){return t.filterTable()}}},[t._v(t._s(t.searchString))])])}))],2):t._e()])]),a("table",{ref:"tabla",staticClass:"table table-condensed",attrs:{"data-component":"Tabla"}},[a("tbody",{ref:"tbody"},t._l(t.editedRows,(function(e,n){return e._filterPassed?a("tr",{class:{rowSelected:t.selectedRowIndex==e._rowIndex},on:{click:function(a){return t.onRowClick(e,n,a)}}},[t.checkable?a("td",{class:t.tdClass,staticStyle:{"text-align":"center",width:"1px"}},[a("input",{attrs:{type:"checkbox"},domProps:{checked:e._checked},on:{click:function(a){return t.onCheckClick(e,n,a)}}})]):t._e(),t._l(t.keys,(function(n){return[t.editablekeys.length&&-1!=t.editablekeys.indexOf(n)?a("td",{class:t.tdClass,attrs:{contenteditable:-1!=t.editablekeys.indexOf(n),"data-help-code":-1!=t.editablekeys.indexOf(n)?"general-cell-canedit":""},on:{blur:function(a){return t.editTable(a,n,e._rowIndex)},keyup:function(e){return t.resizeHeaders()}}},[t._v(t._s(e[n]))]):a("td",{class:t.tdClass},[a("div",{style:t.wrapperStyle,attrs:{title:e[n]}},[t._v(t._s(e[n]))])])]})),t.actions.length?a("td",{class:t.tdClass,staticStyle:{"white-space":"nowrap"}},t._l(t.actions,(function(n){return a("button",{attrs:{"data-help-code":"general-record-delete"},domProps:{innerHTML:t._s(n.button)},on:{click:function(t){return n.func(t,e._rowIndex)}}})})),0):t._e()],2):t._e()})),0),a("tfoot",{staticStyle:{visibility:"hidden"}},[a("tr",[t.checkable?a("td",{staticStyle:{"text-align":"center","padding-top":"0","padding-bottom":"0"}},[a("div",{staticStyle:{height:"0",overflow:"hidden"}})]):t._e(),t._l(t.keys,(function(e){return a("td",{staticStyle:{"padding-top":"0","padding-bottom":"0"}},[a("div",{staticStyle:{height:"0",overflow:"hidden"}},[t._v(t._s(e))])])}))],2)])])])])}),rt=[],st=(a("4d63"),a("466d"),a("41a6")),ot=a.n(st),ct={props:{rows:{type:Array,required:!0},nowrap:Boolean,selectable:{Type:Boolean,default:!0},searchable:Boolean,searchString:String,deleteable:Boolean,orderable:Boolean,checkable:Boolean,singlecheck:Boolean,showHeaders:{type:Boolean,default:!0},cellMaxHeight:String,overflow:String,checkedRows:{type:Array,default:function(){return[]}},hiddenKeys:{type:Array,default:function(){return[]}},editablekeys:{type:Array,default:function(){return[]}},actions:{type:Array,default:function(){return[]}}},data:function(){return{orderby:{},editedRows:this.generateEditedRows(),selectedRowIndex:{},wrapperStyle:function(){var t={};return this.cellMaxHeight?(Object.assign(t,{"max-height":this.cellMaxHeight,overflow:"hidden","text-overflow":"ellipsis"}),t):t}.bind(this)()}},watch:{rows:function(){this.editedRows=this.generateEditedRows(),this.selectedRowIndex=-1},checkedRows:function(){this.editedRows=this.generateEditedRows()}},computed:{keys:function(){var t=this;if(!this.rows.length)return[];var e=Object.keys(this.rows[0]).filter((function(e){return-1==t.hiddenKeys.indexOf(e)}));return e},tdClass:function(){var t={nowrap:!1};return this.nowrap&&(t.nowrap=1),t}},methods:{generateEditedRows:function(){var t=this;if(!this.rows.length)return[];var e=this.rows.map((function(e,a){return Object.assign({},e,{_rowIndex:a,_filterPassed:!0,_checked:-1!=t.checkedRows.indexOf(a)})}));return e},reIndexRows:function(t){return this.rows.length?(this.rows.forEach((function(t,e){t._rowIndex=e})),t):t},editTable:function(t,e,a){var n=ot()(t.target).text();ot()(t.target).text(n),this.editedRows[a][e]=n;var i=Object.assign({},this.editedRows[a]);delete i._rowIndex,delete i._filterPassed,this.$emit("rowEdit",{rowIndex:a,key:e,value:n})},filterTable:function(){var t=this,e=ot()(this.$refs.simple_table_vue).find('.header [contenteditable="true"]');this.editedRows.forEach((function(a,n){var i=!0;e.each((function(){if(i){var t=ot()(this).text(),e=this.id,n=a[e],r=new RegExp(t,"gi"),s=!(!n||null==n||"undefined"==typeof n)&&n.toString().match(r);i=!(""!=t&&!s)}})),t.editedRows[n]._filterPassed=i})),this.resizeHeaders()},onRowClick:function(t,e,a){if(!this.selectable)return this.onCheckClick(t,e,a),!1;this.selectedRowIndex=t._rowIndex,this.$emit("rowClick",t)},onCheckClick:function(t,e,a){a.stopPropagation();var n=JSON.parse(JSON.stringify(this.editedRows));this.singlecheck&&n.forEach((function(t,e){t._checked=!1}));var i=JSON.parse(JSON.stringify(t));i._checked=a.target.checked?a.target.checked:!i._checked,n[e]=i;var r=n.filter((function(t){return t._checked})).map((function(t){return t._rowIndex}));this.editedRows=n,this.$emit("checkClick",r)},allChecksClick:function(t){t.stopPropagation(),this.editedRows.forEach((function(e){e._checked=t.target.checked}));var e=this.editedRows.filter((function(t){return t._checked})).map((function(t){return t._rowIndex}));this.$emit("checkClick",e)},headerClick:function(t,e,a){this.$emit("headerClick",{key:t,target:e,index:a})},orderBy:function(t,e){if(!this.orderable)return!1;var a,n=this.orderby[t];switch(n){case"asc":a="desc";break;case"desc":a=!1;break;default:a="asc"}delete this.orderby[t],ot()(e).removeAttr("data-order"),a&&(this.orderby[t]=a,ot()(e).attr("data-order",a)),this.$emit("orderBy",this.orderby)},getOrder:function(t){var e=this.orderby[t];return e},resizeHeaders:function(){var t=ot()(this.$refs.header),e=ot()(this.$refs.tbody),a=e.find("tr:visible").eq(0).find("td"),n=t.find("tr").eq(0).find("td"),i=ot()(this.$refs.scrollableDiv),r=[];i.height("100%"),t.closest("tbody").width(e.closest("table").width()),a.each((function(t){var e=ot()(this),a=n.eq(t),i=e.width();a.width(i),r.push(i)}));var s=t.height();t.css({"margin-top":"-"+s+"px"}),ot()(this.$refs.simple_table_vue).css({"padding-top":s+"px"}),this.scrollHeaders();var o=ot()(this.$refs.simple_table_vue).height();i.height(o),this.$emit("resizeHeaders",r)},scrollHeaders:function(){var t=this.$refs.scrollableDiv,e=ot()(this.$refs.header),a=-1*t.scrollLeft;ot()(".simple-table-vue").width();e.css({"margin-left":a+"px"}),this.$emit("scrollHeaders",-1*a)},reset:function(){this.$nextTick((function(){var t=JSON.cc(this.generateEditedRows());this.editedRows=t}))}},updated:function(){this.resizeHeaders(),this.filterTable()},mounted:function(){window.addEventListener("resize",this.resizeHeaders),this.resizeHeaders()},beforeDestroy:function(){window.removeEventListener("resize",this.resizeHeaders)}},lt=ct,dt=a("2877"),ut=Object(dt["a"])(lt,it,rt,!1,null,null,null),ht=ut.exports,ft=a("d4ec"),pt=a("bee2"),vt=function(){function t(e,a){Object(ft["a"])(this,t),this.params=e,this.queries=a}return Object(pt["a"])(t,[{key:"getParams",value:function(t){return this.params}},{key:"getColumns",value:function(){var t=_.uniq(this.params.filter((function(t){return t._inlist})).map((function(t){var e=t.key;return"date"==t.data_type&&(e="(convert(char(10),".concat(e,",103))")),"".concat(e," as [").concat(t.alias,"]")})));return t}},{key:"getSqlSyntax",value:function(){var t,e=this,a="";return this.params.filter((function(t){return t._active})).forEach((function(n){var i=n.vista,r=!1;try{var s=JSON.parse(n.value);if("object"==Object(o["a"])(s)&&!s.length){var c=s.sql,l=s.descripcion;r={sql:c,descripcion:l}}}catch(ja){}if(""!=i){console.log("motito"+i+"--");var d=n.campo,u=e.getQueryByName(i),h=u.joinSyntax,f=u.whereSql;t=" ".concat(n.key," on( SELECT ").concat(d," FROM ").concat(h," ").concat(f," )")}else if(r)t=" ".concat(n.key," IN ( ").concat(r.sql," )");else{if(n.list){var p=e.matchListElements(n.list,n.text),v="";p.forEach((function(t){var e=t[0];v+='"'.concat(e,'" OR ')})),""!=v&&(v=v.substring(0,v.length-4),console.log("valor"+v),n.value=v)}t=bt(n.key,n.text,n.data_type,n)}"%"!=n.value&&"[]"!=n.value&&""!=n.value&&(a+=" ".concat(n.operator," ").concat(n.leftText," ").concat(t," ").concat(n.rightText))})),a.length>0&&(a=a.substring(4)),a}},{key:"getOrderBy",value:function(){var t=[];return this.params.forEach((function(e){var a=e._orderby,n="asc"==a||"desc"==a;if(n){var i=e.key;t.push(i+" "+a)}})),t}},{key:"getQueryByName",value:function(t){this.api.$dbq({schemaSyntax:"views",columns:["v_json"],whereSyntax:"name = "+t,language:"spanish",dbID:"circus"},(function(t){var e=t[0].v_json;console.log(e)}),!1)}},{key:"getWhereText",value:function(){var t="";return this.params.filter((function(t){return t._active})).forEach((function(e){t+=e.operator+" "+e.leftText+" "+e.alias+" = "+e.text+" "+e.rightText})),t}},{key:"matchListElements",value:function(t,e){var a=[];if(t){var n=t.values;a=n.filter((function(t){if(-1!=t[1].indexOf(e))return!0}))}return a}}]),t}();function gt(t){if(-1!=t.indexOf('"'))return t;var e=["> ","< ",">= ","<= ","<> ","= "],a=t.split(" - "),n={},i=!1;if(2==a.length){var r=a[0],s=a[1];n.val1=r,n.val2=s,i=!0}return i||e.forEach((function(e){var a=t.split(e);if(2==a.length&&!i){var r=a[1];n.val1=r,n.operator=e,i=!0}})),i?n:t}function mt(t){if("object"==Object(o["a"])(t)){var e=t.val1,a=t.val2,n=t.operator;return"undefined"!=typeof a?'">='.concat(e,'" AND "<=').concat(a,'"'):'"'.concat(n).concat(e,'"')}return t}function xt(t){var e=/ *hoy *\( *([\+,\-] *\d+ *[d,m,a,D,M,A]){0,1} *\) */gi,a=t.match(e);return a?(a.forEach((function(e){t=t.replace(e,n(e))})),t):t;function n(t){var e=t.replace(/ */gi,"").replace("hoy(","").replace(")","");if(!e.length)return"getdate()";var a=e[0],n=e.substr(1,e.length-2),i=e[e.length-1];switch(i){case"a":i="year";break;case"m":i="month";break;case"d":i="day";break}var r="dateadd(".concat(i,",").concat(a).concat(n,",getdate())");return r}}function bt(t,e,a,n){var i=a,r="number"==i,s="date"==i,o='"%" or ""',c=!1;(r||s)&&(e=mt(gt(e))),"%"==e&&(e=o);try{c=JSON.parse(e),"string"!=typeof c&&"number"!=typeof c||(c=void 0)}catch(ja){}var l=/"([^"]*)"/gi,d=e.match(l);if(c){var u=c.map((function(t){return"'".concat(t.replace(/\'/gi,"''"),"'")})),h="";return u.forEach((function(e){h=h+t+" LIKE "+e+" OR "})),h.length&&(h="("+h.substring(0,h.length-3)+")"),r||s?"("+t+" IN ("+u+"))":h}if(d){var f=new RegExp(String.fromCharCode(160),"g"),p=new RegExp(String.fromCharCode(10),"g"),v='(" is null" or "=\'\'")';b="";if(e=e.replace(f,"").replace(p,""),(r||s)&&(e=e.replace('""',v)),r||s){if(b=xt(e.replace(l,t+"$1")),s){var g=new RegExp("[0-9]{1,2}/[0-9]{1,2}/[0-9]{4}","g"),m=b.match(g);if(null!=m)for(var x=0;x<m.length;x++)b=b.replace(m[x],"'"+m[x]+"'")}}else{for(x=0;x<d.length;x++)e=e.replace(d[x],d[x]);b=e.replace(l,t+" like '$1'"),b=b.replace(t+" like ''","("+t+" is null OR "+t+"='')")}return"("+b+")"}if(s){var b="convert(char(10),"+t+",103) like '%"+e+"%'";return"("+b+")"}return"("+t+" like '%"+e+"%')"}var wt={components:{SimpleTable:ht},props:{},data:function(){return{rows:[],hiddenKeys:[],top:400,left:100,height:300,checkedRows:[],type:"text",comparation:0,leftVal:"",rightVal:"",searchString:""}},mounted:function(){window.contextList=this},methods:{contextListKeyUp:function(){var t=this.$refs.desde.value,e=this.$refs.hasta.value,a="";""!=t&&""==e&&(a=">= "+t),""==t&&""!=e&&(a="<= "+e),""!=t&&""!=e&&(a=t==e?"= "+t:t+" - "+e),this.onChange(a)},contextListButton:function(t){"empty"==t&&this.onChange('""'),"filled"==t&&this.onChange("_")},contextListRowClick:function(t){},contextListCheckClick:function(t){var e=JSON.cc(this.rows).filter((function(e,a){return-1!=t.indexOf(a)}));JSON.stringify(e.map((function(t){return t[Object.keys(t)[1]]})));this.onChange(e)},updateContext:function(t){var e=t.searchString;this.searchString=e},openContext:function(t,e,a,n,i,r,s,o){var c=this,l=(o.dbname,o.ownername,o.tablename),d=o.fieldname,u=o.dbID,h=o.searchString;this.singlecheck=s,this.contextListFocused=!0,this.searchString=h,this.onChange=function(t){i(t),setTimeout(c.positionContext,0)},this.$field=e;var f=this;f.rows=[];var p=this.api.getListModel(t);if(p){var v,g,m=function(){e.offset().top,e.outerHeight(),e.offset().left;var t=j(a,v);f.rows=v,f.hiddenKeys=g,f.checkedRows=t,q("list")};if(p.length){var x=p.map((function(t){return{id:t[0],Literal:t[1]}}));v=x,g=["id"],m()}else{var b=p.sqlListGrid,w=p.connection,y=b.toLowerCase(),S=y.substring(y.indexOf("select")+6,y.indexOf("from")).trim().split(","),k=y.substring(y.indexOf("from")+4,y.indexOf("where")).trim(),_=y.substring(y.indexOf("where")+5,y.indexOf("order by")).trim(),C=y.substring(y.indexOf("order by")+8).trim(),O={operation:"select",columns:S,schemaSyntax:k,whereSyntax:_,orderbyColumns:C,dbID:w};console.log(O),this.api.$dbq(O,(function(t){v=t,g=[S[0]],m()}))}}else{var N=gt(a),T=(N.leftVal,N.operator);if(T?-1!=T.indexOf(">")?(f.leftVal=N.val1,f.rightVal=""):-1!=T.indexOf("<")?(f.leftVal="",f.rightVal=N.val1):(f.leftVal=N.val1,f.rightVal=N.val1):(f.leftVal=N.val1,f.rightVal=N.val2),"text"==n){var L={operation:"request",sqlSyntax:"SELECT distinct top 20  1 AS _ROW_NUMBER,".concat(d," FROM ").concat(l," WHERE ").concat(d," IS NOT NULL AND ").concat(d," <> '' AND ").concat(d," LIKE '%").concat(a,"%' ORDER BY ").concat(d),dbID:u};this.api.$dbq(L,(function(t){f.rows=t,f.checkedRows=j(a,t),f.hiddenKeys=["_ROW_NUMBER"]}),!0,!0),n="list"}q(n)}function j(t,e){var a=[];try{var n=JSON.parse(t);e.forEach((function(t,e){-1!=n.indexOf(t[Object.keys(t)[1]])&&a.push(e)}))}catch(ja){}return a}function q(t){e.offset().top,e.outerHeight(),e.offset().left,$(f.$refs.contextList).show();f.type=t,f.opened=!0,f.positionContext(),$("body").click(E),r&&r()}var M=this;function E(t){var e=document.activeElement,a=$(e).closest("#circusContextList").length||$(t.target).closest("#circusContextList").length;if(!a&&!M.contextListFocused){var n=$(M.$refs.contextList);n.hide(),f.opened=!1,$("body").off()}}},positionContext:function(t){if(contextList.opened&&this.$field){var e=this.$field.offset().top+this.$field.outerHeight(),a=this.$field.offset().left;if(contextList.top=e,contextList.left=a,t&&$.contains(t.target,this.$field[0])){var n=i(this.$field,$(t.target));n?$(this.$refs.contextList).show():$(this.$refs.contextList).hide()}}function i(t,e){var a=e.offset().top,n=a+e.height(),i=t.offset().top,r=i+t.height();return r<=n&&i>=a}},closeContext:function(){this.contextListFocused=!1}}},yt=wt,St=Object(dt["a"])(yt,at,nt,!1,null,null,null),kt=St.exports,_t=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ly",{attrs:{flexbox:"1"}},t._l(t.buttons,(function(e){return a("ly",[a("button",{staticClass:"btn btn-primary btn-xs",staticStyle:{border:"none",outline:"none"},attrs:{disabled:e.disabled,title:e.title,"data-help-code":e.helpCode,value:e.label},domProps:{innerHTML:t._s(e.label)},on:{click:function(a){return t.onClick(e)}}})])})),1)},Ct=[],Ot=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:t.itemClasses},[t._t("default")],2)},$t=[],Nt=a("ade3"),Tt={props:["grow","overflow","breakHeight","flexbox","column","height","shrink","wrap"],computed:{isContainer:function(){return this.flexbox},baseClassName:function(){return this.isContainer?"LyBox":"LyItem"},itemClasses:function(){var t,e=this.baseClassName,a=(t={},Object(Nt["a"])(t,e,1),Object(Nt["a"])(t,e+"-grow",this.grow),Object(Nt["a"])(t,e+"-overflow",this.overflow),Object(Nt["a"])(t,e+"-breakHeight",this.breakHeight),Object(Nt["a"])(t,e+"-column",this.column),Object(Nt["a"])(t,e+"-height",this.height),Object(Nt["a"])(t,e+"-shrink",this.shrink),Object(Nt["a"])(t,e+"-wrap",this.wrap),t);return a}}},Lt=Tt,jt=Object(dt["a"])(Lt,Ot,$t,!1,null,null,null),qt=jt.exports,Mt={props:{buttons:{type:Array,required:!0}},methods:{onClick:function(t){t.onClick(t.label)}},components:{Ly:qt}},Et=Mt,Pt=(a("31ba"),Object(dt["a"])(Et,_t,Ct,!1,null,"4919e585",null)),Vt=Pt.exports,zt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Ly",{attrs:{"data-component":"Containers",height:"1",flexbox:"1"}},t._l(t.containers,(function(e){return a("Ly",{style:t.containerWidth,attrs:{grow:"1",height:"1","data-overflow":t.containerType(e)}},[a("Ly",{attrs:{flexbox:"1",column:"1",height:"1"}},[a("Ly",{staticStyle:{padding:"0 0 0px 0px","border-bottom":"1px solid #999"},attrs:{flexbox:"1"}},t._l(t.toolbarButtons(e),(function(n,i){return a("div",{class:{pestanaVentana:!0,pestanaVentanaSelected:-1!=t.visibleVentanas(e).indexOf(i)},on:{click:n.onClick}},[a("div",{staticClass:"botonLabel",attrs:{contenteditable:"false"},on:{dblclick:function(e){return t.editWindowName(e.target,i)},blur:function(e){return t.saveWindowName(e.target,i)}}},[t._v(t._s(n.label))]),"+"!=n.label?a("div",{staticClass:"close closeButton",staticStyle:{cursor:"default"},on:{click:function(t){return t.stopPropagation(),n.onClose(t)}}}):t._e()])})),0),a("Ly",{staticStyle:{position:"relative"},attrs:{grow:"1",height:"1",overflow:t.containerType(e)}},t._l(t.ventanasDelContainer(e),(function(n){return a("Ventana",{directives:[{name:"show",rawName:"v-show",value:-2!=t.visibleVentanas(e).indexOf(n.index),expression:"visibleVentanas ( container ).indexOf(ventana.index)!=-2"}],key:n.index,staticClass:"window-container",style:t.styleVentana(e,-1!=t.visibleVentanas(e).indexOf(n.index)),attrs:{ventana:n,isInline:t.isInlineContainer(e),index:n.index,switchVentana:t.onButtonClick,panels:t.panels},on:{panelSwitch:t.panelSwitch}})})),1)],1)],1)})),1)},Ft=[],Ht=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Ly",{ref:"Ventana",staticStyle:{},attrs:{flexbox:"1",column:"1",grow:"1",height:"1","data-component":"Ventana","data-layout":t.isInline?"inline":"default"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.admin,expression:"admin"}],staticStyle:{width:"100%",padding:"5px 5px"}},[a("div",{staticClass:"toolbar-box"},[a("div",{staticClass:"toolbar-box-title"},[t._v("Navegación")]),t.parentTablesWindows.length?a("select",{ref:"parentTable",staticClass:"form-control",staticStyle:{display:"inline",width:"auto","font-size":"11px","margin-top":"2px"},attrs:{"data-help-code":"ventana-toolbar-parents"},on:{change:function(e){return t.injectParent()}}},[a("option",[t._v("Padres...")]),t._l(t.parentTablesWindows,(function(e){return a("option",{domProps:{value:e.index}},[t._v(t._s(e.name))])}))],2):t._e(),t.childTablesWindows.length?a("select",{ref:"childTable",staticClass:"form-control",staticStyle:{display:"inline",width:"auto","font-size":"11px"},attrs:{"data-help-code":"ventana-toolbar-childs"},on:{change:function(e){return t.injectChild()}}},[a("option",[t._v("Hijos...")]),t._l(t.childTablesWindows,(function(e){return a("option",{domProps:{value:e.index}},[t._v(t._s(e.name))])}))],2):t._e()]),a("div",{staticClass:"toolbar-box"},[a("div",{staticClass:"toolbar-box-title"},[t._v("Tabla Principal")]),a("select",{staticClass:"form-control",staticStyle:{display:"inline",width:"auto","font-size":"11px","margin-bottom":"-2px","margin-top":"1px"},attrs:{"data-help-code":t.getRelations(t.tabs.names,t.ventana.data.identities)},on:{change:function(e){return t.tableChange(e)}}},t._l(t.availableTables,(function(e){return a("option",{domProps:{value:e,selected:e==t.ventana.data.table?"selected":""}},[t._v(t._s(e))])})),0)]),a("div",{staticClass:"toolbar-box"},[a("div",{staticClass:"toolbar-box-title"},[t._v("Paneles")]),a("Toolbar",{staticStyle:{width:"auto",float:"left",margin:"0px 0 -2px 3px"},attrs:{buttons:t.buttons2}})],1),a("div",{staticClass:"toolbar-box"},[a("div",{staticClass:"toolbar-box-title"},[t._v("Configuración")]),a("select",{staticClass:"form-control",staticStyle:{display:"inline",width:"auto","font-size":"11px","margin-bottom":"-2px","margin-top":"1px",float:"left"},attrs:{id:"configFileSelect"}},[a("option",{attrs:{value:""}},[t._v("Importar Config...")]),t._l(t.configFilesList,(function(e){return a("option",{domProps:{value:e,selected:e==t.api.parsedSearch.reset}},[t._v(t._s(e))])}))],2),a("Toolbar",{staticStyle:{width:"auto",float:"left",margin:"0px 0 -2px 3px"},attrs:{buttons:t.buttons}})],1)]),a("div",{staticStyle:{display:"flex","flex-grow":"1",height:"calc(100% - 0px)","max-height":"calc(100% - 50px)",position:"relative"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.panels.form&&t.admin,expression:"panels.form&&admin"}],ref:"Formulario",staticClass:"panel-envelope",staticStyle:{height:"100%",border:"0px solid red"}},[a("Formulario",{staticStyle:{"min-width":"150px",background:"#f4f4f4",padding:"0px"},attrs:{item:t.form.data,onFilter:t.formFilter,overflow:t.overflow,keysSettings:t.keysSettings,ventana:t.ventana}})],1),a("Ly",{directives:[{name:"show",rawName:"v-show",value:t.list,expression:"list"}],staticClass:"slots panel-envelope",staticStyle:{"flex-grow":"1"},attrs:{grow:"1",breakHeight:"1",shrink:"1"}},[a("Listado",{ref:"listado",staticStyle:{background:"#f4f4f4",padding:"5px","box-sizing":"border-box"},attrs:{rows:t.ventana.data.list.data,ventana:t.ventana,filter:t.formFilterState.data,overflow:t.overflow,formSetValues:t.formSetValues,keysSettings:t.keysSettings},on:{rowClick:t.rowClick}})],1)],1)])},It=[],Dt=(a("94be"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Ly",{staticStyle:{border:"0 solid #ddd","border-width":"0 0px 0 0"},attrs:{flexbox:"1",column:"1",height:"1","data-component":"Formulario"}},[a("div",{staticStyle:{display:"flex","flex-wrap":"nowrap"}},[a("div",{staticStyle:{width:"12px","margin-top":"4px"}},[a("input",{attrs:{type:"checkbox","data-help-code":"campos-ruta-mostrar"},domProps:{checked:t.showPath},on:{click:function(e){t.showPath=e.target.checked}}})]),a("div",{staticStyle:{padding:"3px","margin-left":"0px",width:"calc(100% - 15px)"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.filter,expression:"filter"}],staticClass:"form-control",attrs:{placeholder:"Buscar..."},domProps:{value:t.filter},on:{focus:function(t){return t.target.select()},input:function(e){e.target.composing||(t.filter=e.target.value)}}})])]),a("div",{staticStyle:{position:"relative",left:"calc(100% - 50px)",top:"-20px",height:"0",overflow:"visible","font-size":"9px",color:"gray"}},[t._v(t._s(t.shownNumber)+" / "+t._s(Object.keys(t.formState.editorData).length))]),a("div",{staticClass:"LyItem LyItem-grow LyItem-overflow",staticStyle:{padding:"0"},on:{scroll:function(e){return t.positionContext(e)}}},[a("GridFields",{ref:"gridfields",attrs:{item:t.formState.editorData,"data-component":"Formulario",filter:t.filter,keysSettings:t.keysSettings,showFields:t.showFields,showPath:t.showPath},on:{change:t.formChange,clickLabel:t.clickLabel,focusField:t.focusField,filter:t.updateShownNumber,addField:t.addField}})],1)])}),Rt=[],Bt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"tabs"},[a("Tabs",{attrs:{tabs:t.tabs}},t._l(t.tabs,(function(e){return a("Ly",{attrs:{slot:e,flexbox:"1",column:"1",grow:"1"},slot:e},t._l(t.shallowFields(e),(function(n){return a("Ly",{directives:[{name:"show",rawName:"v-show",value:t.inFilter(n),expression:"inFilter(campo)"}],style:t.elementStyle(n)},[a("table",{staticStyle:{"white-space":"nowrap"}},[a("tr",{staticStyle:{display:"block",margin:"1px 0"},on:{click:function(a){return t.addField(a,n,e)}}},[t._l(n.name.split(".").slice(0,3),(function(e){return"dbo"!=e&&t.showPath?a("td",{staticClass:"highlight-text",on:{dblclick:function(e){return t.editFieldName(e.target)},blur:function(e){return t.saveFieldName(e.target,n.name)}}},[t._v(t._s(e))]):t._e()})),a("td",{staticClass:"highlight-text highlight-text-strong",domProps:{innerHTML:t._s(t.api.getLiteral(n.name))},on:{dblclick:function(e){return t.editFieldName(e.target)},blur:function(e){return t.saveFieldName(e.target,n.name)}}})],2)]),"multiple"==n.type?a("select",{directives:[{name:"model",rawName:"v-model",value:n.value,expression:"campo.value"}],staticClass:"form-control",attrs:{id:n.name,multiple:""},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(n,"value",e.target.multiple?a:a[0])},function(a){return t.assignModel(a,n,e)}]}},[a("option",{attrs:{value:""}}),t._l(t.listOptions(n),(function(e){return a("option",{domProps:{value:e[0]}},[t._v(t._s(e[1]))])}))],2):"select"==n.type?a("select",{directives:[{name:"model",rawName:"v-model",value:n.value,expression:"campo.value"}],staticClass:"form-control",attrs:{id:n.name},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(n,"value",e.target.multiple?a:a[0])},function(a){return t.assignModel(a,n,e)}]}},[a("option"),t._l(t.listOptions(n),(function(e){return a("option",{domProps:{value:e[0]}},[t._v(t._s(e[1]))])}))],2):"boolean"==n.type?a("input",{directives:[{name:"model",rawName:"v-model",value:n.value,expression:"campo.value"}],staticClass:"form-control",attrs:{id:n.name,type:"checkbox"},domProps:{checked:Array.isArray(n.value)?t._i(n.value,null)>-1:n.value},on:{change:[function(e){var a=n.value,i=e.target,r=!!i.checked;if(Array.isArray(a)){var s=null,o=t._i(a,s);i.checked?o<0&&t.$set(n,"value",a.concat([s])):o>-1&&t.$set(n,"value",a.slice(0,o).concat(a.slice(o+1)))}else t.$set(n,"value",r)},function(a){return t.assignModel(a,n,e)}]}}):a("textarea",{directives:[{name:"model",rawName:"v-model",value:n.value,expression:"campo.value"},{name:"show",rawName:"v-show",value:t.showFields,expression:"showFields"}],staticClass:"form-control",staticStyle:{height:"24px",resize:"none","border-radius":"5px",background:"#eee"},attrs:{title:n.value,id:n.name,"data-help-code":"search-parameter-value"},domProps:{value:n.value},on:{blur:function(a){return t.assignModel(a,n,e)},focus:function(e){return t.focusTextField(e,n)},input:function(e){e.target.composing||t.$set(n,"value",e.target.value)}}})])})),1)})),1)],1)},At=[],Jt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{"data-component":"tabs"}},[t._l(t.tabsArr,(function(e){return t.tabsArr.length>1?a("button",{on:{click:function(a){return t.buttonClick(e)}}},[t._v(t._s(e.name))]):t._e()})),t._l(t.tabsArr,(function(e){return a("div",{directives:[{name:"show",rawName:"v-show",value:e.name==t.selectedTab,expression:"tab.name == selectedTab"}],staticClass:"slot"},[t._t(e.name)],2)}))],2)},Kt=[],Ut={props:{tabs:{type:Array,required:!0}},data:function(){return{selectedTab:!1,beforeTabsArr:[]}},computed:{tabsArr:function(){var t=this.tabs.map((function(t,e){return{name:t,index:e}}));return this.beforeTabsArr!=t&&(this.selectedTab=this.tabs[0]),this.beforeTabsArr=t,t}},methods:{buttonClick:function(t){console.log(t.index),this.selectedTab=t.name}},beforeMount:function(){this.selectedTab=this.tabs[0]}},Qt=Ut,Wt=(a("4400"),Object(dt["a"])(Qt,Jt,Kt,!1,null,null,null)),Gt=Wt.exports,Zt={components:{Ly:qt,Tabs:Gt},props:{item:{type:Object,required:!0},branchs:Array,lists:Array,filter:String,keysSettings:Object,showFields:Boolean,showPath:Boolean},data:function(){return{validations:{label:function(t){return!0}},objeto:JSON.cc(this.item)}},watch:{item:function(t,e){this.objeto=t,$(this.$refs.tabs).find("textarea").css({height:"24px"})},filter:function(t,e){var a=this,n=this.shallowFields("main").filter((function(t){return a.inFilter(t)}));this.$emit("filter",n.length)}},computed:{branchKeys:function(){var t=this.branchs;return t?(t=t.map((function(t){return t.key})),{}):[]},tabs:function(){return["main"].concat(this.branchKeys)}},methods:{addField:function(t,e,a){var n=this.objeto;Object.keys(n).forEach((function(t){n[t]=""})),this.assignModel({target:{value:"%"}},e,a),this.$emit("addField",e)},saveFieldName:function(t,e){this.$store.commit("database_setLiteral",{key:e,literal:$(t).text()}),$(t).attr("contenteditable",!1)},editFieldName:function(t){$(t).attr("contenteditable",!0).focus()},focusTextField:function(t,e){""==t.target.value&&(this.objeto[e.name]="%"),t.target.select(),this.utils.setTextareaHeight(t.target),this.$emit("focusField",$(t.currentTarget))},labelClick:function(t){return!1},inFilter:function(t){if(!this.filter||""==this.filter)return!0;var e=new RegExp(this.filter.toLowerCase(),"gi"),a=this.api.getLiteral(t.name).toLowerCase().match(e),n=t.name.toLowerCase().match(e),i=null!=a||null!=n;return i},elementStyle:function(t){if(!this.keysSettings)return{};var e=this.keysSettings[t.name],a=!!e&&e.readOnly,n=a?{"z-index":-1}:{};return n},assignModel:function(t,e,a){var n=this,i=t.target.value;if(!this.isContentValid(i,e,a))return alert("El contenido del campo no es valido."),!1;var r="multiple"==e.type?new select(i).getValues():i,s=e.name,o=Object(Nt["a"])({},s,r),c=this.branch(a);Object.assign(c,o);var l=JSON.cc(this.objeto);Object.keys(l).forEach((function(t){var e=l[t];l[t]={value:e,text:n.listTextForValue(e,t)}})),this.utils.setTextareaHeight(t.target),this.$emit("change",l),window.contextList.positionContext()},isContentValid:function(t,e,a){var n=this.fieldValidation(e,a),i=!n||n(t);return i},branch:function(t){return"main"==t?this.objeto:this.objeto[t]},shallowFields:function(t){var e=this,a=this.branch(t),n=Object.keys(a).filter((function(t){return null==a[t]||"object"!=Object(o["a"])(a[t])||e.listFor(t)})),i=n.map((function(t){var n=JSON.cc(a[t]),i=t,r=e.fieldType(t),s=e.listTextForValue(n,t);return{name:i,value:n,type:r,text:s}}));return i},fieldType:function(t){var e=this.listFor(t);return e?e.multiple?"multiple":"textarea":"boolean"==typeof this.objeto[t]?"boolean":"textarea"},listTextForValue:function(t,e){var a=this.listFor(e);if(!a||!a.values||!a.values.filter)return t;var n=a.values.filter((function(e){return e[0]==t}))[0],i=!!n&&n[1];return i},listFor:function(t){if(!this.keysSettings)return!1;var e=this.keysSettings[t],a=!!e&&e.list;return!(!a||!a.values.length)&&a},listOptions:function(t){var e=t.name,a=this.keysSettings[e].list.values;return a},listFor_old:function(t){if(!this.lists)return!1;var e=this.lists.filter((function(e){return e.key==t}))[0];return e||!1},listOptions_old:function(t){var e=t.name,a=this.lists.filter((function(t){return t.key==e}))[0].values;return a},fieldValidation:function(t,e){var a=!1;if("main"==e&&(e=void 0),e)try{a=this.validations[e][t.name]}catch(ja){}else try{a=this.validations[t.name]}catch(ja){}return a}},beforeUpdate:function(){},updated:function(){}},Xt=Zt,Yt=(a("17dc"),Object(dt["a"])(Xt,Bt,At,!1,null,"17873f82",null)),te=Yt.exports,ee={components:{GridFields:te,Toolbar:Vt,Ly:qt},data:function(){return{showToolbar:!1,buttons:[{label:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 44 44" xmlns:xlink="http://www.w3.org/1999/xlink" enable-background="new 0 0 44 44"><g><circle cx="20" cy="20" r="7"></circle><path d="m22,0c-12.2,0-22,9.8-22,22s9.8,22 22,22 22-9.8 22-22-9.8-22-22-22zm12.7,33.3l-1.4,1.4c-0.4,0.4-1,0.4-1.4,0l-5.4-5.4c-0.2-0.2-0.4-0.2-0.6-0.1-1.7,1.1-3.7,1.7-5.9,1.7-6.1,0-11-4.9-11-11s4.9-11 11-11 11,4.9 11,11c0,2.2-0.6,4.2-1.7,5.9-0.1,0.2-0.1,0.5 0.1,0.6l5.4,5.4c0.3,0.5 0.3,1.1-0.1,1.5z"></path></g></svg>',onClick:this.filter,helpCode:"form-toolbar-filter"},{label:'<svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 330.5 330.5" style="enable-background:new 0 0 330.5 330.5;" xml:space="preserve"><path d="M178.3,136.6l16.4,16.4l69.7-69.7c2.3-2.3,3.4-5.2,3.4-8.2c0-3-1.1-5.9-3.4-8.2c-4.5-4.5-11.8-4.5-16.4,0L178.3,136.6z\t M172.3,140.2l-0.7-0.7l-12.4,12.4l-7.7,7.7l20.4,20.4l8.3-8.3l11.8-11.8l-0.9-0.9l-1.2-1.2l-16.4-16.4L172.3,140.2z M66.8,197.2\tc-0.1,0-0.2,0.1-0.3,0.1c-0.5,0.1-0.9,0.3-1.3,0.6l-0.2,0.1L65,198c-0.5,0.3-0.8,0.7-1.2,1.2c-0.3,0.5-0.6,1-0.8,1.6\tc-0.5,1.7-0.3,3.7,1.3,4.9c3.8,3,7.7,6,11.6,8.9l0.7-0.3l1.7-0.7L80,213l14.1-5.4l20.6-7.9l-14.3,16.6l-8,9.2l-1.1,1.3l-1.1,1.3\tl-1.1,1.3c0.8,0.3,1.6,0.4,2.5,0.2c0.5-0.1,1-0.3,1.6-0.5c0.1,0,0.1-0.1,0.2-0.1c0.6-0.3,1.1-0.5,1.7-0.7l3.3,3.3\tc0,0.8-0.1,1.5-0.1,2.3c-0.1,0.7-0.1,1.5-0.2,2.2c-0.1,1.1-0.3,2.2-0.6,3.3c-0.6,2.5,0.8,5.7,3.5,6.2c4.4,0.9,8,2.4,11.1,4.5\tc3.5,2.4,6.4,5.4,9.1,9.1c1.3,1.8,2.6,3.6,3.9,5.6c1,1.6,2.6,2.3,4.1,2.3c0.7,0,1.4-0.1,2-0.4c2.4-0.9,4.2-3.4,3.1-6.2l32.3-75.5\tl-20.2-20.2L66.8,197.2z M165.2,330.5L165.2,330.5C74,330.5,0,256.5,0,165.2v0C0,74,74,0,165.2,0h0c91.3,0,165.2,74,165.2,165.2v0\tC330.5,256.5,256.5,330.5,165.2,330.5z"></path></svg>',onClick:this.clean,helpCode:"form-toolbar-clear"}],formState:{data:function(){return this.formStateData(JSON.cc(this.item))}.bind(this)(),editorData:this.item},filter:"",shownNumber:0,focusedKeyName:"",showFields:!1,showPath:!1}},props:["item","onFilter","overflow","keysSettings","ventana"],watch:{item:function(t,e){this.formState.editorData=t,this.formState.data=this.formStateData(t)}},computed:{},mounted:function(){var t=$(this.$refs.Formulario);t.width(t.width())},updated:function(){},methods:{positionContext:function(t){window.contextList.positionContext(t)},contextListKeyUp:function(t){var e=JSON.cc(this.formState),a=this.focusedKeyName;e.editorData[a]=t,e.data[a]={value:t,text:t},this.formState=e},contextListRowClick:function(t){},contextListCheckClick:function(t){var e=JSON.cc(this.formState),a=this.focusedKeyName,n=JSON.stringify(t.map((function(t){return t[Object.keys(t)[1]]})));e.editorData[a]=n,e.data[a]={value:n,text:n},this.formState=e},updateShownNumber:function(t){this.shownNumber=t},shownNumber_old:function(){var t=0;return this.$refs.gridfields&&(t=this.$refs.gridfields.shownNumber),t},clickLabel:function(t){var e=this.$store.state.selectedQuery,a=e.name,n=t.find("input").add(t.find("select")),i=t.find("label").text(),r="{{"+a+"|"+i+"}}";n.val(r),this.formState.editorData[i]=r,this.formState.data[i].text=r,this.formState.data[i].value=r},focusField:function(t){var e=t.attr("id"),a=t.val(),n=this.utils.getBasicDataType(this.keysSettings[e].data_type);this.focusedKeyName=e,window.contextList.openContext(e,t,a,n,this.contextListCheckClick)},filterState:function(){var t=this,e=this.formState.data,a={};return Object.keys(e).forEach((function(n){var i="string"==typeof e[n].value||"number"==typeof e[n].value?e[n].value.toString():"",r=t.keysSettings&&t.keysSettings[n]?t.keysSettings[n].data_type:null,s=(t.keysSettings&&t.keysSettings[n]&&t.keysSettings[n].list,t.api.getListModel(n)),o=!(!s||!s.length)&&{values:s},c=e[n].text,l=new RegExp("{{.*|.*}}","gi"),d=i.match(l),u="",h="";if(null!=d){var f=d[0].replace("{{","").replace("}}","").split("|");u=f[0],h=f[1]}o&&(r="varchar",c=i),i&&""!=i&&(a[n]={value:i,data_type:r,text:c,vista:u,campo:h,list:o})})),a},formStateData:function(t){var e={},a=JSON.cc(t);return Object.keys(a).forEach((function(t){var n=a[t];e[t]={value:n,text:n}})),JSON.cc(e)},setQuery:function(){this.clean();var t=this.formState.editorData,e=this.$store.state.selectedQuery,a=e.queryEditor.params;Object.keys(a).forEach((function(e){var n=a[e].value;t[e]=n})),this.formState.data=this.formStateData(t)},filter_old:function(){this.onFilter(this.filterState()),this.clean()},clean:function(){var t=this.formState.data,e={},a={};Object.keys(t).forEach((function(t){e[t]={value:"",text:""},a[t]=""}));var n=JSON.cc(this.formState);n.data=e,n.editorData=a,this.formState=n},addField:function(t){var e=JSON.cc(this.filterState());this.onFilter(e),this.clean()},formChange:function(t){this.formState.data=t,window.contextList.closeContext()},loadFields:function(){var t=this;getFieldsForTable(this.ventana.data.table,(function(e){var a=e.fields,n=e.identities;t.$store.commit("Ventana_setFields",{indexVentana:t.ventana.index,fields:a,identities:n})}))}}},ae=ee,ne=(a("a16a"),Object(dt["a"])(ae,Dt,Rt,!1,null,"0bde978a",null)),ie=ne.exports,re=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Ly",{ref:"listado",staticClass:"qe",staticStyle:{padding:"0"},attrs:{flexbox:"1",column:"1",grow:"1",height:"1","data-component":"Listado"}},[a("div",{staticStyle:{position:"absolute",top:"0",left:"0",width:"5px",height:"100vh",background:"transparent","z-index":"1000"},attrs:{onmouseover:"window.showForm()"}}),a("div",{staticStyle:{position:"absolute",bottom:"2px",left:"0",width:"100vw",height:"4px",background:"transparent","z-index":"1000"},attrs:{onmouseover:"window.showQueries()"}}),a("Series",{ref:"popup",attrs:{operation:t.series.operation,fields:t.series_parameters},on:{operate:t.operate_serie}}),a("div",{staticStyle:{width:"100%",display:"block","min-height":"31px",padding:"1px 0",background:"#f4f4f4",margin:"0"}},[a("div",{ref:"toolbar",staticStyle:{float:"left",display:"block",padding:"3px",width:"450px"}},[a("Toolbar",{staticStyle:{float:"left"},attrs:{buttons:t.admin?t.buttons:t.buttonsUser}}),a("div",{directives:[{name:"show",rawName:"v-show",value:t.admin,expression:"admin"}],staticStyle:{border:"0px solid lightgray","border-width":"0px 1px",float:"left","margin-top":"-8px",width:"150px"}},[a("span",{staticStyle:{"font-size":"9px",width:"100%",float:"left","text-align":"center"}},[t._v("Series")]),a("select",{staticClass:"form-control",staticStyle:{width:"auto","margin-top":"-0px","font-size":"11px",float:"left","margin-left":"10px"},attrs:{"data-help-code":"list-toolbar-series-operation"},on:{change:function(e){t.series.operation=e.target.value}}},[a("option",{attrs:{value:"Sobreescribir"}},[t._v("Sobreescribir")]),a("option",{attrs:{value:"Vaciar"}},[t._v("Vaciar")])]),a("button",{staticClass:"btn btn-primary btn-xs",staticStyle:{background:"transparent",border:"0",float:"left",outline:"none","box-shadow":"none"},attrs:{"data-help-code":"list-toolbar-series-run"},on:{click:function(e){return t.open_serie(e)}}},[a("svg",{staticStyle:{"enable-background":"new 0 0 256 256"},attrs:{version:"1.1",id:"Capa_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 256 256","xml:space":"preserve"}},[a("path",{attrs:{d:"M0,128C0,57.3,57.3,0,128,0s128,57.3,128,128s-57.3,128-128,128S0,198.7,0,128z M172.8,68.3c1.2-10.2-6.8-19.1-17.1-19.1\n\t\t\t\tc-8.7,0-16.1,6.6-17.1,15.2c-0.5,4.6,0.8,9.1,3.6,12.7C151.6,88.9,171,83.6,172.8,68.3z M78.3,207.2c3.3-2.5,3.5-3.7,12.2-18.6\n\t\t\t\tc0,0,0-0.1,0.1-0.1c0,0,0,0-0.1,0c4.5-7.7,10.5-18.2,19.1-32.7c0.7,0.4,14.2,6,19.9,9.7c-6.5,4-15.1,9.6-21.3,13.4\n\t\t\t\tc-10,6-4.4,18.7,4.1,18c4.1-0.3,4.9-1.2,20.4-8.9c7.3-3.6,14.8-7.3,20.7-10.9c4.9-2.9,10.9-12.3,3.3-18.9L133.1,142\n\t\t\t\tc5.9-11.3,11.6-21.7,17.4-31.8c19.8,5.7,40.1-0.7,55.2-21.7c5.7-7.9,1.2-15.2-5.1-15.2c-10.4,0-10.2,17.3-32.7,17.3\n\t\t\t\tc-10.7,0-18.5-4.3-28.1-10C118,67.5,90,76.3,75.9,96.1c-8.5,11.8,4.5,22.6,12.8,11c7.8-10.9,17.6-15,29.1-12\n\t\t\t\tc-5.2,9.1-52.1,97.7-52.8,99.3C59.9,204.8,71.5,212.3,78.3,207.2z"}})])])])],1),a("div",{staticStyle:{float:"right",display:"block"}},[t._v(t._s(t.grid.loadedRecsNumber)+"/"+t._s(t.grid.rowCount))])]),a("div",{ref:"qeContainer",staticClass:"bgqe",staticStyle:{position:"relative",border:"0 solid #ddd","max-height":"80%","border-width":"0px 0 1px 0","margin-top":"5px","margin-left":"-5px",width:"calc(100% + 10px)"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.show.queryEditor,expression:"show.queryEditor"}],staticStyle:{height:"100%",overflow:"auto",padding:"5px 0","min-height":"47px"}},[a("Queryeditor",{ref:"qe",attrs:{params:t.qeParams,dbID:t.api.getTableConnectionId(t.ventana.data.table)},on:{paramUpdate:t.qeParamUpdate}})],1)]),a("div",{style:{width:"100%","min-height":"50px",overflow:"hidden",border:"0px solid red",position:"relative"}},[a("div",{ref:"computer",staticStyle:{width:"10000px",height:"40px",padding:"0 0 0 22px",position:"absolute","white-space":"nowrap"}},t._l(t.grid.columns.names,(function(e,n){return a("div",{key:"cont_"+e.label,ref:"computed_"+e.label,refInFor:!0,staticClass:"header-cell",attrs:{type:t.grid.columns.types[n]}},[a("select",{staticStyle:{display:"none"}},[a("option",{attrs:{value:"SUM"}},[t._v("SUMA")]),a("option",{attrs:{value:"AVG"}},[t._v("MEDIA")]),a("option",{attrs:{value:"DISTINCT",selected:""}},[t._v("MEDIA")])]),a("div",{staticStyle:{display:"flex",width:"100%"}},[a("div",{staticStyle:{border:"0px solid red",position:"relative",width:"40px",float:"left"}},[a("button",{staticStyle:{padding:"0",border:"0",width:"20px",height:"15px"},attrs:{"data-help-code":"search-parameter-active"},on:{click:function(e){return t.activateParam(n,e)}}},[a("svg",{directives:[{name:"show",rawName:"v-show",value:t.qeParams[n]._active,expression:"qeParams[i]._active"}],staticStyle:{"enable-background":"new 0 0 470 470"},style:{height:"12px","margin-bottom":"-1px","margin-left":"-2px",fill:t.qeParams[n]._active?"blue":""},attrs:{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 470 470","xml:space":"preserve"}},[a("g",[a("path",{attrs:{d:"M162.5,102.5c0-39.977,32.523-72.5,72.5-72.5s72.5,32.523,72.5,72.5V160h30v-57.5C337.5,45.981,291.519,0,235,0\t\tS132.5,45.981,132.5,102.5V160h30V102.5z"}}),t._v(" "),a("rect",{attrs:{x:"77.5",y:"190",width:"315",height:"280"}})]),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g")]),a("svg",{directives:[{name:"show",rawName:"v-show",value:!t.qeParams[n]._active,expression:"!qeParams[i]._active"}],staticStyle:{"enable-background":"new 0 0 470 470"},style:{height:"12px","margin-bottom":"-1px","margin-left":"-2px",fill:t.qeParams[n]._active?"blue":""},attrs:{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 470 470","xml:space":"preserve"}},[a("g",[a("rect",{attrs:{x:"137.5",y:"190",width:"315",height:"280"}}),t._v(" "),a("path",{attrs:{d:"M192.5,102.5V160h30v-57.5C222.5,45.981,176.519,0,120,0S17.5,45.981,17.5,102.5V190h30v-87.5\t\tC47.5,62.523,80.023,30,120,30S192.5,62.523,192.5,102.5z"}})]),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g")])]),a("button",{staticStyle:{padding:"0","border-left-color":"transparent","box-shadow":"none",border:"0"},attrs:{"data-help-code":"search-parameter-order"},on:{click:function(e){return t.setNewOrder(n)}}},[a("svg",{directives:[{name:"show",rawName:"v-show",value:"asc"!=t.qeParams[n]._orderby&&"desc"!=t.qeParams[n]._orderby,expression:"qeParams[i]._orderby!='asc'&&qeParams[i]._orderby!='desc'"}],staticStyle:{"enable-background":"new 0 0 427.484 427.484"},style:{height:"10px","margin-bottom":"0px","margin-left":"-2px"},attrs:{version:"1.1",id:"Capa_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:"427.484px",height:"427.484px",viewBox:"0 0 427.484 427.484","xml:space":"preserve"}},[a("g",[a("path",{attrs:{d:"M405.943,290.254L302.096,425.338c-1.04,1.354-2.66,2.146-4.374,2.146c-1.702,0-3.321-0.798-4.368-2.146L189.511,290.254\t\tc-0.769-0.993-1.144-2.176-1.144-3.357c0-1.152,0.364-2.329,1.108-3.322c1.499-1.975,4.125-2.707,6.434-1.809l68.76,27.166V21.01\t\tc0-3.047,2.477-5.503,5.515-5.503h55.106c3.038,0,5.509,2.456,5.509,5.503v287.922l68.76-27.166\t\tc2.305-0.898,4.93-0.166,6.419,1.809C407.473,285.561,407.461,288.28,405.943,290.254z M238.012,143.913\t\tc0.744-0.993,1.105-2.167,1.105-3.322c0-1.176-0.379-2.367-1.142-3.36L134.125,2.148C133.081,0.792,131.458,0,129.759,0\t\tc-1.714,0-3.328,0.798-4.377,2.148L21.539,137.23c-1.519,1.969-1.525,4.69-0.03,6.683c1.487,1.968,4.114,2.707,6.419,1.803\t\tl68.766-27.163v287.919c0,3.05,2.462,5.509,5.506,5.509h55.109c3.041,0,5.515-2.459,5.515-5.509V118.552l68.763,27.163\t\tC233.886,146.62,236.51,145.88,238.012,143.913z"}})]),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g")]),a("svg",{directives:[{name:"show",rawName:"v-show",value:"asc"==t.qeParams[n]._orderby,expression:"qeParams[i]._orderby=='asc'"}],staticStyle:{"enable-background":"new 0 0 442.91 442.91"},style:{fill:"blue",height:"11px","margin-bottom":"0px","margin-left":"-2px"},attrs:{version:"1.1",id:"Capa_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 442.91 442.91","xml:space":"preserve"}},[a("g",[a("path",{attrs:{d:"M13.98,196.395c8.45,4.662,19.232,1.457,23.894-6.993l9.907-17.775c0.583,0,1.457,0.291,2.331,0.291h119.469\t\tc0.583,0,1.457,0,2.04,0l8.742,17.483c3.205,6.119,9.324,9.616,15.735,9.616c2.622,0,5.245-0.583,7.867-2.04\t\tc8.742-4.371,11.947-14.861,7.576-23.602L128.495,9.616c-2.914-5.828-8.742-9.324-15.152-9.616c-6.411,0-12.53,3.497-15.735,9.033\t\tl-90.33,163.76C2.616,181.243,5.53,191.733,13.98,196.395z M112.178,54.781l41.668,82.171H66.721L112.178,54.781z M25.635,413.188\t\tl120.052-124.714H38.165c-9.616,0-17.483-7.867-17.483-17.483c0-9.616,7.867-17.483,17.483-17.483h148.608\t\tc6.993,0,13.404,4.079,16.026,10.781c2.622,6.411,1.457,13.987-3.497,18.94L79.251,407.943h107.522\t\tc9.616,0,17.483,7.867,17.483,17.483s-7.867,17.483-17.483,17.483H38.165c-6.993,0-13.404-4.079-16.026-10.781\t\tC19.225,425.718,20.682,418.433,25.635,413.188z M294.586,377.639V84.502c0-9.616,7.867-17.483,17.483-17.483\t\ts17.483,7.867,17.483,17.483V327.52l77.218-97.615c6.119-7.576,16.9-8.742,24.477-2.914c7.576,6.119,8.742,16.901,2.914,24.477\t\tL325.765,388.42c-3.497,4.371-8.45,6.702-13.695,6.702c-2.04,0-3.788-0.291-5.828-0.874\t\tC299.249,391.625,294.586,385.215,294.586,377.639z"}})]),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g")]),a("svg",{directives:[{name:"show",rawName:"v-show",value:"desc"==t.qeParams[n]._orderby,expression:"qeParams[i]._orderby=='desc'"}],staticStyle:{"enable-background":"new 0 0 440.87 440.87"},style:{fill:"blue",height:"11px","margin-bottom":"0px","margin-left":"-2px"},attrs:{version:"1.1",id:"Capa_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 440.87 440.87","xml:space":"preserve"}},[a("g",[a("path",{attrs:{d:"M19.605,17.483C19.605,7.867,27.473,0,37.089,0h148.608c6.993,0,13.404,4.079,16.026,10.781\t\tc2.622,6.411,1.457,13.987-3.497,18.94L78.174,154.436h107.522c9.616,0,17.483,7.867,17.483,17.483s-7.867,17.483-17.483,17.483\t\tH37.089c-6.993,0-13.404-4.079-16.026-10.781c-2.622-6.411-1.457-13.987,3.497-18.94L144.611,34.967H37.089\t\tC27.473,34.967,19.605,27.099,19.605,17.483z M6.201,414.645l90.33-163.76c3.205-5.536,9.324-9.033,15.735-9.033\t\tc6.411,0,12.238,3.788,15.152,9.616l83.046,163.76c4.371,8.742,0.874,19.232-7.576,23.602c-2.622,1.166-5.245,2.04-7.867,2.04\t\tc-6.411,0-12.53-3.497-15.735-9.616l-8.742-17.483c-0.583,0-1.457,0-2.04,0H48.744c-0.874,0-1.457,0-2.331-0.291l-9.907,17.775\t\tc-4.662,8.45-15.444,11.656-23.894,6.993C4.453,433.585,1.539,423.095,6.201,414.645z M65.645,378.804h86.834l-41.668-82.171\t\tL65.645,378.804z M305.165,385.506c1.748,0.583,3.788,0.874,5.828,0.874c5.245,0,10.199-2.331,13.695-6.702l108.396-136.952\t\tc6.119-7.576,4.662-18.649-2.914-24.477c-7.576-6.119-18.649-4.662-24.477,2.914l-77.218,97.615V75.761\t\tc0-9.616-7.867-17.483-17.483-17.483c-9.616,0-17.483,7.867-17.483,17.483v293.136C293.51,376.473,298.172,382.884,305.165,385.506\t\tz"}})]),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g")])])]),a("div",{staticStyle:{position:"relative",border:"1px solid #ddd",padding:"1px 4px 0 4px","white-space":"nowrap","margin-top":"-1px"}},[a("div",{staticClass:"button-operation",staticStyle:{position:"absolute",cursor:"pointer",border:"0px solid blue",top:"2px","z-index":"1000"}},[a("svg",{directives:[{name:"show",rawName:"v-show",value:"number"==t.grid.columns.types[n],expression:"grid.columns.types[i]=='number'"}],staticClass:"hide",staticStyle:{color:"red",zoom:"0.6",float:"left","margin-top":"-2px"},attrs:{title:"SUMA",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512.002 512.002","xml:space":"preserve"},on:{click:function(e){return t.clickFunc("SUM",e)}}},[a("g",[a("g",[a("path",{staticStyle:{background:"blue"},attrs:{d:"M437.108,74.898c-99.869-99.858-262.345-99.858-362.214,0c-99.858,99.858-99.858,262.34,0,362.203\t\t\tc49.934,49.929,115.521,74.896,181.107,74.896s131.173-24.967,181.107-74.896C536.966,337.243,536.966,174.762,437.108,74.898z\t\t\t M373.067,166.895c0,9.229-7.484,16.707-16.707,16.707s-16.707-7.478-16.707-16.707v-16.826H191.01l77.923,95.294\t\t\tc5.036,6.15,5.036,14.975,0,21.126l-77.923,95.204h148.643v-16.588c0-9.229,7.484-16.707,16.707-16.707\t\t\tc9.223,0,16.707,7.478,16.707,16.707v33.414c0,9.229-7.601,16.588-16.824,16.588H155.758c-6.45,0-12.334-3.66-15.098-9.491\t\t\tc-2.762-5.835-1.926-12.713,2.164-17.705l91.585-111.926L142.825,144.06c-4.09-4.992-4.927-11.959-2.164-17.795\t\t\tc2.762-5.83,8.648-9.61,15.098-9.61h200.485c9.223,0,16.824,7.597,16.824,16.826V166.895z"}})])]),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g")]),a("svg",{directives:[{name:"show",rawName:"v-show",value:"number"==t.grid.columns.types[n],expression:"grid.columns.types[i]=='number'"}],staticClass:"hide",staticStyle:{"enable-background":"new 0 0 512 512",zoom:"0.6",float:"left","margin-top":"-2px"},attrs:{title:"MEDIA",version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 512 512","xml:space":"preserve"},on:{click:function(e){return t.clickFunc("AVG",e)}}},[a("g",[a("g",[a("path",{attrs:{d:"M155.804,205.902c-27.625,0-50.098,22.473-50.098,50.098s22.473,50.098,50.098,50.098\t\t\tc28.788,0,52.979-23.076,77.68-50.098C208.782,228.978,184.593,205.902,155.804,205.902z"}})])]),a("g",[a("g",[a("path",{attrs:{d:"M356.196,205.902c-28.788,0-52.979,23.076-77.68,50.098c24.7,27.022,48.891,50.098,77.68,50.098\t\t\tc27.625,0,50.098-22.473,50.098-50.098S383.821,205.902,356.196,205.902z"}})])]),a("g",[a("g",[a("path",{attrs:{d:"M256,0C114.844,0,0,114.839,0,256s114.844,256,256,256s256-114.839,256-256S397.156,0,256,0z M356.196,339.496\t\t\tc-41.465,0-71.896-27.919-100.196-58.632c-28.3,30.713-58.73,58.632-100.196,58.632c-46.042,0-83.496-37.454-83.496-83.496\t\t\tc0-46.042,37.454-83.496,83.496-83.496c41.465,0,71.896,27.919,100.196,58.632c28.3-30.713,58.73-58.632,100.196-58.632\t\t\tc46.042,0,83.496,37.454,83.496,83.496C439.692,302.042,402.238,339.496,356.196,339.496z"}})])]),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g")]),a("svg",{staticStyle:{"enable-background":"new 0 0 512 512",zoom:"0.6",float:"left","margin-top":"-2px"},attrs:{title:"Número de valores distintos",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 512 512","xml:space":"preserve"},on:{click:function(e){return t.clickFunc("DISTINCT",e)}}},[a("g",[a("g",[a("path",{attrs:{d:"M256,0C114.844,0,0,114.839,0,256s114.844,256,256,256s256-114.839,256-256S397.156,0,256,0z M389.594,317.231H244.592\n\t\t\tl-40.125,90.281c-2.772,6.219-8.872,9.92-15.275,9.92c-2.261,0-4.567-0.468-6.773-1.446c-8.425-3.745-12.221-13.612-8.48-22.043\n\t\t\tl34.094-76.712h-85.627c-9.219,0-16.699-7.475-16.699-16.699c0-9.225,7.48-16.699,16.699-16.699h100.471l29.688-66.797H122.406v0\n\t\t\tc-9.219,0-16.699-7.475-16.699-16.699c0-9.225,7.48-16.699,16.699-16.699h145.002l40.125-90.281\n\t\t\tc3.751-8.42,13.579-12.236,22.049-8.474c8.425,3.745,12.221,13.612,8.48,22.043l-34.094,76.712h85.627\n\t\t\tc9.219,0,16.699,7.475,16.699,16.699s-7.48,16.699-16.699,16.699H289.124l-29.688,66.797h130.159\n\t\t\tc9.219,0,16.699,7.475,16.699,16.699C406.294,309.756,398.813,317.231,389.594,317.231z"}})])]),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g")]),a("div",{staticStyle:{float:"none",clear:"both"}})]),a("span",{staticStyle:{top:"-1px",float:"left","padding-left":"17px",position:"relative"}}),a("div",{staticStyle:{float:"none",clear:"both"}})])]),a("div",{class:{"search-field":!0,"search-field-inactive":!!t.qeParams[n]&&!t.qeParams[n]._active},attrs:{contentEditable:"true"},on:{keydown:function(e){return t.keyDownSearchField(e,n)},focus:function(e){return t.focusSearchField(e,n)},blur:function(e){return t.focusSearchField(e,n,!0)}}},[t._v(t._s(t.getParamSearchString(n)))])])})),0)]),a("Ly",{staticStyle:{position:"relative","padding-top":"0px"},attrs:{grow:"1"}},[a("button",{directives:[{name:"show",rawName:"v-show",value:t.admin,expression:"admin"}],staticStyle:{position:"absolute",width:"18px",top:"2px",right:"0px",padding:"3px","z-index":"1"},on:{click:function(e){t.show.queryEditor=!t.show.queryEditor}}},[a("div",{class:{"arrow-up":t.show.queryEditor,"arrow-down":!t.show.queryEditor}})]),a("SimpleTable",{ref:"Tabla",staticStyle:{background:"white"},attrs:{height:"100%",hiddenKeys:["PK_ID"],rows:t.grid.rows,overflow:"scroll",checkable:!0,checkedRows:t.checkedIndexes,selectable:!1},on:{orderBy:t.orderBy,rowClick:t.rowClick,checkClick:t.checkClick,scrollHeaders:t.scrollHeaders,resizeHeaders:t.resizeHeaders,headerClick:t.headerClick}})],1)],1)},se=[],oe=(a("c740"),a("2b3d"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Tabs",{attrs:{tabs:t.tabs}},t._l(t.tabs,(function(e){return a("Ly",{attrs:{slot:e,flexbox:"1",column:"1",grow:"1"},slot:e},t._l(t.shallowFields(e),(function(n){return a("Ly",{directives:[{name:"show",rawName:"v-show",value:t.inFilter(n),expression:"inFilter(campo)"}],style:t.elementStyle(n)},[a("div",t._l(n.name.split("."),(function(e){return a("div",{staticStyle:{float:"left"}},[t._v(t._s(e))])})),0),a("label",{on:{click:function(e){return t.labelClick(e)}}},[t._v(t._s(n.name))]),"multiple"==n.type?a("select",{directives:[{name:"model",rawName:"v-model",value:n.value,expression:"campo.value"}],staticClass:"form-control",attrs:{multiple:""},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(n,"value",e.target.multiple?a:a[0])},function(a){return t.assignModel(a.target,n,e)}]}},[a("option",{attrs:{value:""}}),t._l(t.listOptions(n),(function(e){return a("option",{domProps:{value:e[0]}},[t._v(t._s(e[1]))])}))],2):"select"==n.type?a("select",{directives:[{name:"model",rawName:"v-model",value:n.value,expression:"campo.value"}],staticClass:"form-control",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(n,"value",e.target.multiple?a:a[0])},function(a){return t.assignModel(a.target.value,n,e)}]}},[a("option"),t._l(t.listOptions(n),(function(e){return a("option",{domProps:{value:e[0]}},[t._v(t._s(e[1]))])}))],2):"boolean"==n.type?a("input",{directives:[{name:"model",rawName:"v-model",value:n.value,expression:"campo.value"}],staticClass:"form-control",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(n.value)?t._i(n.value,null)>-1:n.value},on:{change:[function(e){var a=n.value,i=e.target,r=!!i.checked;if(Array.isArray(a)){var s=null,o=t._i(a,s);i.checked?o<0&&t.$set(n,"value",a.concat([s])):o>-1&&t.$set(n,"value",a.slice(0,o).concat(a.slice(o+1)))}else t.$set(n,"value",r)},function(a){return t.assignModel(a.target.checked,n,e)}]}}):a("input",{directives:[{name:"model",rawName:"v-model",value:n.value,expression:"campo.value"}],staticClass:"form-control",domProps:{value:n.value},on:{blur:function(a){return t.assignModel(a.target.value,n,e)},input:function(e){e.target.composing||t.$set(n,"value",e.target.value)}}})])})),1)})),1)}),ce=[],le=a("1157"),de=a.n(le),ue=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("textarea",{directives:[{name:"resize",rawName:"v-resize"}]},[t._v(t._s(t.valor))])},he=[],fe={props:["valor"],directives:{resize:{inserted:function(t){var e=t.scrollHeight;if(e>0){var a=de()(t).height()+e;t.style.height=a+"px",console.log(a)}}}}},pe=fe,ve=Object(dt["a"])(pe,ue,he,!1,null,null,null),ge=ve.exports,me={components:{Ly:qt,autosizeTextarea:ge,Tabs:Gt},props:{item:{type:Object,required:!0},branchs:Array,lists:Array,filter:String,keysSettings:Object},data:function(){return{validations:{label:function(t){return!0}},objeto:JSON.cc(this.item)}},watch:{item:function(t,e){this.objeto=t}},computed:{branchKeys:function(){var t=this.branchs;return t?(t=t.map((function(t){return t.key})),{}):[]},tabs:function(){return["main"].concat(this.branchKeys)}},methods:{labelClick:function(t){var e=de()(t.currentTarget).parent();this.$emit("clickLabel",e)},inFilter:function(t){if(!this.filter||""==this.filter)return!0;var e=-1!=t.name.toLowerCase().indexOf(this.filter.toLowerCase());return e},elementStyle:function(t){if(!this.keysSettings)return{};var e=this.keysSettings[t.name],a=!!e&&e.readOnly,n=a?{"z-index":-1}:{};return n},assignModel:function(t,e,a){var n=this;if(!this.isContentValid(t,e,a))return alert("El contenido del campo no es valido."),!1;var i="multiple"==e.type?new select(t).getValues():t,r=e.name,s=Object(Nt["a"])({},r,i),o=this.branch(a);Object.assign(o,s);var c=JSON.cc(this.objeto);Object.keys(c).forEach((function(t){var e=c[t];c[t]={value:e,text:n.listTextForValue(e,t)}})),this.$emit("change",c)},isContentValid:function(t,e,a){var n=this.fieldValidation(e,a),i=!n||n(t);return i},branch:function(t){return"main"==t?this.objeto:this.objeto[t]},shallowFields:function(t){var e=this,a=this.branch(t),n=Object.keys(a).filter((function(t){return null==a[t]||"object"!=Object(o["a"])(a[t])||e.listFor(t)})),i=n.map((function(t){var n=JSON.cc(a[t]),i=t,r=e.fieldType(t),s=e.listTextForValue(n,t);return{name:i,value:n,type:r,text:s}}));return i},fieldType:function(t){var e=this.listFor(t);return e?e.multiple?"multiple":"select":"boolean"==typeof this.objeto[t]?"boolean":"textarea"},listTextForValue:function(t,e){var a=this.listFor(e);if(!a||!a.values||!a.values.filter)return t;var n=a.values.filter((function(e){return e[0]==t}))[0],i=!!n&&n[1];return i},listFor:function(t){if(!this.keysSettings)return!1;var e=this.keysSettings[t],a=!!e&&e.list;return!(!a||!a.values.length)&&a},listOptions:function(t){var e=t.name,a=this.keysSettings[e].list.values;return a},listFor_old:function(t){if(!this.lists)return!1;var e=this.lists.filter((function(e){return e.key==t}))[0];return e||!1},listOptions_old:function(t){var e=t.name,a=this.lists.filter((function(t){return t.key==e}))[0].values;return a},fieldValidation:function(t,e){var a=!1;if("main"==e&&(e=void 0),e)try{a=this.validations[e][t.name]}catch(ja){}else try{a=this.validations[t.name]}catch(ja){}return a}},beforeUpdate:function(){}},xe=me,be=(a("3e60"),Object(dt["a"])(xe,oe,ce,!1,null,"18981f6d",null)),we=be.exports,ye=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{"data-component":"query-editor"}},[a("ol",{ref:"lista",staticStyle:{width:"100%"}},t._l(t.parameters.data,(function(e,n){return a("li",{staticClass:"param",attrs:{param:JSON.stringify(e),"data-active":e._active}},[a("span",{staticClass:"grippy"}),a("button",{directives:[{name:"show",rawName:"v-show",value:t.admin,expression:"admin"}],staticClass:"close closeButton",attrs:{"data-help-code":"search-parameter-close"},on:{click:function(e){return t.deleteParam(n)}}}),a("div",{staticClass:"parameter-toolbar",staticStyle:{"white-space":"nowrap",border:"1px solid #ddd",margin:"0px 0 0px 0",padding:"3px 1px"}},[a("button",{staticStyle:{padding:"0","border-left-color":"transparent"},attrs:{"data-help-code":"search-parameter-order"},on:{click:function(e){return t.setNewOrder(n)}}},[a("svg",{directives:[{name:"show",rawName:"v-show",value:"asc"!=e._orderby&&"desc"!=e._orderby,expression:"param._orderby!='asc'&&param._orderby!='desc'"}],staticStyle:{"enable-background":"new 0 0 427.484 427.484"},style:{height:"10px","margin-bottom":"0px","margin-left":"-2px"},attrs:{version:"1.1",id:"Capa_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:"427.484px",height:"427.484px",viewBox:"0 0 427.484 427.484","xml:space":"preserve"}},[a("g",[a("path",{attrs:{d:"M405.943,290.254L302.096,425.338c-1.04,1.354-2.66,2.146-4.374,2.146c-1.702,0-3.321-0.798-4.368-2.146L189.511,290.254\t\tc-0.769-0.993-1.144-2.176-1.144-3.357c0-1.152,0.364-2.329,1.108-3.322c1.499-1.975,4.125-2.707,6.434-1.809l68.76,27.166V21.01\t\tc0-3.047,2.477-5.503,5.515-5.503h55.106c3.038,0,5.509,2.456,5.509,5.503v287.922l68.76-27.166\t\tc2.305-0.898,4.93-0.166,6.419,1.809C407.473,285.561,407.461,288.28,405.943,290.254z M238.012,143.913\t\tc0.744-0.993,1.105-2.167,1.105-3.322c0-1.176-0.379-2.367-1.142-3.36L134.125,2.148C133.081,0.792,131.458,0,129.759,0\t\tc-1.714,0-3.328,0.798-4.377,2.148L21.539,137.23c-1.519,1.969-1.525,4.69-0.03,6.683c1.487,1.968,4.114,2.707,6.419,1.803\t\tl68.766-27.163v287.919c0,3.05,2.462,5.509,5.506,5.509h55.109c3.041,0,5.515-2.459,5.515-5.509V118.552l68.763,27.163\t\tC233.886,146.62,236.51,145.88,238.012,143.913z"}})]),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g")]),a("svg",{directives:[{name:"show",rawName:"v-show",value:"asc"==e._orderby,expression:"param._orderby=='asc'"}],staticStyle:{"enable-background":"new 0 0 442.91 442.91"},style:{fill:"blue",height:"11px","margin-bottom":"0px","margin-left":"-2px"},attrs:{version:"1.1",id:"Capa_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 442.91 442.91","xml:space":"preserve"}},[a("g",[a("path",{attrs:{d:"M13.98,196.395c8.45,4.662,19.232,1.457,23.894-6.993l9.907-17.775c0.583,0,1.457,0.291,2.331,0.291h119.469\t\tc0.583,0,1.457,0,2.04,0l8.742,17.483c3.205,6.119,9.324,9.616,15.735,9.616c2.622,0,5.245-0.583,7.867-2.04\t\tc8.742-4.371,11.947-14.861,7.576-23.602L128.495,9.616c-2.914-5.828-8.742-9.324-15.152-9.616c-6.411,0-12.53,3.497-15.735,9.033\t\tl-90.33,163.76C2.616,181.243,5.53,191.733,13.98,196.395z M112.178,54.781l41.668,82.171H66.721L112.178,54.781z M25.635,413.188\t\tl120.052-124.714H38.165c-9.616,0-17.483-7.867-17.483-17.483c0-9.616,7.867-17.483,17.483-17.483h148.608\t\tc6.993,0,13.404,4.079,16.026,10.781c2.622,6.411,1.457,13.987-3.497,18.94L79.251,407.943h107.522\t\tc9.616,0,17.483,7.867,17.483,17.483s-7.867,17.483-17.483,17.483H38.165c-6.993,0-13.404-4.079-16.026-10.781\t\tC19.225,425.718,20.682,418.433,25.635,413.188z M294.586,377.639V84.502c0-9.616,7.867-17.483,17.483-17.483\t\ts17.483,7.867,17.483,17.483V327.52l77.218-97.615c6.119-7.576,16.9-8.742,24.477-2.914c7.576,6.119,8.742,16.901,2.914,24.477\t\tL325.765,388.42c-3.497,4.371-8.45,6.702-13.695,6.702c-2.04,0-3.788-0.291-5.828-0.874\t\tC299.249,391.625,294.586,385.215,294.586,377.639z"}})]),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g")]),a("svg",{directives:[{name:"show",rawName:"v-show",value:"desc"==e._orderby,expression:"param._orderby=='desc'"}],staticStyle:{"enable-background":"new 0 0 440.87 440.87"},style:{fill:"blue",height:"11px","margin-bottom":"0px","margin-left":"-2px"},attrs:{version:"1.1",id:"Capa_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 440.87 440.87","xml:space":"preserve"}},[a("g",[a("path",{attrs:{d:"M19.605,17.483C19.605,7.867,27.473,0,37.089,0h148.608c6.993,0,13.404,4.079,16.026,10.781\t\tc2.622,6.411,1.457,13.987-3.497,18.94L78.174,154.436h107.522c9.616,0,17.483,7.867,17.483,17.483s-7.867,17.483-17.483,17.483\t\tH37.089c-6.993,0-13.404-4.079-16.026-10.781c-2.622-6.411-1.457-13.987,3.497-18.94L144.611,34.967H37.089\t\tC27.473,34.967,19.605,27.099,19.605,17.483z M6.201,414.645l90.33-163.76c3.205-5.536,9.324-9.033,15.735-9.033\t\tc6.411,0,12.238,3.788,15.152,9.616l83.046,163.76c4.371,8.742,0.874,19.232-7.576,23.602c-2.622,1.166-5.245,2.04-7.867,2.04\t\tc-6.411,0-12.53-3.497-15.735-9.616l-8.742-17.483c-0.583,0-1.457,0-2.04,0H48.744c-0.874,0-1.457,0-2.331-0.291l-9.907,17.775\t\tc-4.662,8.45-15.444,11.656-23.894,6.993C4.453,433.585,1.539,423.095,6.201,414.645z M65.645,378.804h86.834l-41.668-82.171\t\tL65.645,378.804z M305.165,385.506c1.748,0.583,3.788,0.874,5.828,0.874c5.245,0,10.199-2.331,13.695-6.702l108.396-136.952\t\tc6.119-7.576,4.662-18.649-2.914-24.477c-7.576-6.119-18.649-4.662-24.477,2.914l-77.218,97.615V75.761\t\tc0-9.616-7.867-17.483-17.483-17.483c-9.616,0-17.483,7.867-17.483,17.483v293.136C293.51,376.473,298.172,382.884,305.165,385.506\t\tz"}})]),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g")])]),a("button",{attrs:{"data-help-code":"search-parameter-list"},on:{click:function(a){t.parameters.data[n]._inlist=!e._inlist,t.emitParameters()}}},[a("svg",{directives:[{name:"show",rawName:"v-show",value:e._inlist,expression:"param._inlist"}],staticStyle:{"enable-background":"new 0 0 932.15 932.15"},style:{height:"13px","margin-bottom":"-2px","margin-left":"-2px",fill:"blue"},attrs:{version:"1.1",id:"Capa_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:"932.15px",height:"932.15px",viewBox:"0 0 932.15 932.15","xml:space":"preserve"}},[a("g",[a("path",{attrs:{d:"M466.075,161.525c-205.6,0-382.8,121.2-464.2,296.1c-2.5,5.3-2.5,11.5,0,16.9c81.4,174.899,258.601,296.1,464.2,296.1\t\ts382.8-121.2,464.2-296.1c2.5-5.3,2.5-11.5,0-16.9C848.875,282.725,671.675,161.525,466.075,161.525z M466.075,676.226\t\tc-116.1,0-210.1-94.101-210.1-210.101c0-116.1,94.1-210.1,210.1-210.1c116.1,0,210.1,94.1,210.1,210.1\t\tS582.075,676.226,466.075,676.226z"}}),t._v(" "),a("circle",{attrs:{cx:"466.075",cy:"466.025",r:"134.5"}})]),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g")]),a("svg",{directives:[{name:"show",rawName:"v-show",value:!e._inlist,expression:"!param._inlist"}],staticStyle:{"enable-background":"new 0 0 469.44 469.44"},style:{height:"13px","margin-bottom":"-2px","margin-left":"-2px"},attrs:{version:"1.1",id:"Capa_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 469.44 469.44","xml:space":"preserve"}},[a("g",[a("g",[a("g",[a("path",{attrs:{d:"M231.147,160.373l67.2,67.2l0.32-3.52c0-35.307-28.693-64-64-64L231.147,160.373z"}}),t._v(" "),a("path",{attrs:{d:"M234.667,117.387c58.88,0,106.667,47.787,106.667,106.667c0,13.76-2.773,26.88-7.573,38.933l62.4,62.4\t\t\t\tc32.213-26.88,57.6-61.653,73.28-101.333c-37.013-93.653-128-160-234.773-160c-29.867,0-58.453,5.333-85.013,14.933l46.08,45.973\t\t\t\tC207.787,120.267,220.907,117.387,234.667,117.387z"}}),t._v(" "),a("path",{attrs:{d:"M21.333,59.253l48.64,48.64l9.707,9.707C44.48,145.12,16.64,181.707,0,224.053c36.907,93.653,128,160,234.667,160\t\t\t\tc33.067,0,64.64-6.4,93.547-18.027l9.067,9.067l62.187,62.293l27.2-27.093L48.533,32.053L21.333,59.253z M139.307,177.12\t\t\t\tl32.96,32.96c-0.96,4.587-1.6,9.173-1.6,13.973c0,35.307,28.693,64,64,64c4.8,0,9.387-0.64,13.867-1.6l32.96,32.96\t\t\t\tc-14.187,7.04-29.973,11.307-46.827,11.307C175.787,330.72,128,282.933,128,224.053C128,207.2,132.267,191.413,139.307,177.12z"}})])])]),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g")])]),a("button",{directives:[{name:"show",rawName:"v-show",value:e._extended&&e._active,expression:"param._extended&&param._active"}],staticStyle:{width:"auto",padding:"0 3px"},attrs:{"data-help-code":"search-parameter-operator"},domProps:{innerHTML:t._s("AND"==e.operator?"Y":"O")},on:{click:function(e){return t.changeOperator(n)}}}),a("button",{directives:[{name:"show",rawName:"v-show",value:e._active,expression:"param._active"}],staticStyle:{padding:"0"},attrs:{"data-help-code":"search-parameter-negated"},on:{click:function(e){return t.negateParam(t.parameters.data[n])}}},[a("svg",{staticStyle:{"enable-background":"new 0 0 46 46"},style:{height:"11px","margin-bottom":"-1px","margin-left":"-2px",fill:-1!=e.leftText.toLowerCase().indexOf("not")?"red":""},attrs:{version:"1.1",id:"Capa_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:"46px",height:"46px",viewBox:"0 0 46 46","xml:space":"preserve"}},[a("g",[a("g",[a("path",{attrs:{d:"M32.294,19H13.706c-2.209,0-4,1.791-4,4s1.791,4,4,4h18.588c2.209,0,4-1.791,4-4S34.503,19,32.294,19z"}}),t._v(" "),a("path",{attrs:{d:"M23,0C10.298,0,0,10.298,0,23c0,12.703,10.298,23,23,23s23-10.297,23-23C46,10.298,35.702,0,23,0z M23,40\t\t\tc-9.374,0-17-7.625-17-17c0-9.373,7.626-17,17-17s17,7.627,17,17C40,32.375,32.374,40,23,40z"}})])]),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g")])])]),a("div",{directives:[{name:"show",rawName:"v-show",value:e._active&&e._extended,expression:"param._active && param._extended"}],staticClass:"side-text",staticStyle:{"font-weight":"bold"},attrs:{contenteditable:"true","data-help-code":"search-parameter-parentesis-left"},domProps:{innerHTML:t._s(e.leftText)},on:{blur:function(e){return t.changeText(n,e,"leftText")},keyup:function(e){return t.textKeyPress(e,"leftText",n)}}}),a("div",{staticClass:"highlight-text highlight-text-strong",attrs:{contenteditable:"true","data-help-code":"search-parameter-alias"},on:{blur:function(e){return t.editAliasName(n,e)}}},[t._v(t._s(e.alias))]),a("button",{staticStyle:{padding:"0",border:"0"},attrs:{"data-help-code":"search-parameter-active"},on:{click:function(e){return t.activateParam(t.parameters.data[n],e)}}},[a("svg",{directives:[{name:"show",rawName:"v-show",value:e._active,expression:"param._active"}],staticStyle:{"enable-background":"new 0 0 470 470"},style:{height:"12px","margin-bottom":"-1px","margin-left":"-2px",fill:e._active?"blue":""},attrs:{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 470 470","xml:space":"preserve"}},[a("g",[a("path",{attrs:{d:"M162.5,102.5c0-39.977,32.523-72.5,72.5-72.5s72.5,32.523,72.5,72.5V160h30v-57.5C337.5,45.981,291.519,0,235,0\t\tS132.5,45.981,132.5,102.5V160h30V102.5z"}}),t._v(" "),a("rect",{attrs:{x:"77.5",y:"190",width:"315",height:"280"}})]),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g")]),a("svg",{directives:[{name:"show",rawName:"v-show",value:!e._active,expression:"!param._active"}],staticStyle:{"enable-background":"new 0 0 470 470"},style:{height:"12px","margin-bottom":"-1px","margin-left":"-2px",fill:e._active?"blue":""},attrs:{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 470 470","xml:space":"preserve"}},[a("g",[a("rect",{attrs:{x:"137.5",y:"190",width:"315",height:"280"}}),t._v(" "),a("path",{attrs:{d:"M192.5,102.5V160h30v-57.5C222.5,45.981,176.519,0,120,0S17.5,45.981,17.5,102.5V190h30v-87.5\t\tC47.5,62.523,80.023,30,120,30S192.5,62.523,192.5,102.5z"}})]),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g"),a("g")])]),a("div",{directives:[{name:"show",rawName:"v-show",value:e._active,expression:"param._active"}],staticClass:"highlight-text",attrs:{contenteditable:"true","data-help-code":"search-parameter-value"},domProps:{innerHTML:t._s(t.valueParam(e))},on:{blur:function(e){return t.editParameter(n,e)},focus:function(a){return t.openContext(n,a,e)},keyup:function(a){return t.positionContext(n,a,e)}}}),a("div",{directives:[{name:"show",rawName:"v-show",value:e._active&&e._extended,expression:"param._active && param._extended"}],staticClass:"side-text",staticStyle:{"font-weight":"bold"},attrs:{contenteditable:"true","data-help-code":"search-parameter-parentesis-right"},domProps:{innerHTML:t._s(e.rightText)},on:{blur:function(e){return t.changeText(n,e,"rightText")},keyup:function(e){return t.textKeyPress(e,"rightText")}}}),a("button",{directives:[{name:"show",rawName:"v-show",value:e._active&&t.admin,expression:"param._active && admin"}],staticStyle:{width:"16px",border:"0"},attrs:{"data-help-code":"search-parameter-extend"},on:{click:function(a){t.parameters.data[n]._extended=!e._extended,t.emitParameters()}}},[a("div",{class:{"arrow-left":e._extended,"arrow-right":!e._extended},staticStyle:{display:"block",float:"left",zoom:"0.42","margin-top":"10px","margin-left":"8px",opacity:"0.5"}})]),a("div",{directives:[{name:"show",rawName:"v-show",value:e._extendKey,expression:"param._extendKey"}],attrs:{contenteditable:"true","data-help-code":"search-parameter-key"},domProps:{innerHTML:t._s(e.key)},on:{blur:function(e){return t.editKeyName(n,e)}}}),a("button",{directives:[{name:"show",rawName:"v-show",value:e._extended,expression:"param._extended"}],staticStyle:{width:"16px",border:"0"},attrs:{"data-help-code":"search-parameter-extend-key"},on:{click:function(a){t.parameters.data[n]._extendKey=!e._extendKey,t.emitParameters()}}},[a("div",{class:{"arrow-left":e._extendKey,"arrow-right":!e._extendKey},staticStyle:{display:"block",float:"left",zoom:"0.42","margin-top":"10px","margin-left":"8px",opacity:"0.5"}})])])})),0)])},Se=[],ke=a("3835"),_e={components:{},props:{params:[Array],dbID:String},data:function(){return{admin:this.api.parsedSearch.admin,parameters:{data:JSON.cc(this.params)},focusedParamIndex:-1}},watch:{params:function(t,e){var a=JSON.cc(t);Object.keys(a).forEach((function(t){a[t].value="%"==a[t].value?"":a[t].value})),this.parameters.data=a}},computed:{settings:function(){var t=JSON.cc(this.parameters.data),e=new vt(JSON.cc(t),this.$store.state.queries),a=(e.getParams(),e.getSqlSyntax()),n=e.getWhereText(),i=e.getOrderBy(),r=e.getColumns(),s={sqlSyntax:a,params:t,whereText:n,columns:r,orderBy:i};return s}},mounted:function(){$(this.$refs.lista).sortable({handle:"span",stop:this.sortableStop,placeholder:"ui-state-highlight"})},methods:{positionContext:function(t,e,a){window.contextList.positionContext(),window.contextList.updateContext({searchString:e.target.innerHTML}),this.openContext(t,e,a)},emitParameters:function(t){this.$emit("paramUpdate",JSON.cc(this.parameters.data))},openContext:function(t,e,a){a.value;var n=a.reference,i=$(e.target).text(),r=a.data_type;this.focusedParamIndex=t;var s=a.reference.split("."),o=Object(ke["a"])(s,4),c=o[0],l=o[1],d=o[2],u=o[3],h="";try{JSON.parse(i)}catch(ja){h=i}window.contextList.openContext(n,$(e.target),i,r,this.contextListCheckClick,!1,!1,{dbname:c,ownername:l,tablename:d,fieldname:u,dbID:this.dbID,searchString:h})},contextListCheckClick:function(t){var e,a=this.focusedParamIndex,n=this.parameters.data[a];n&&(e=t.map?JSON.stringify(t.map((function(t){return t[Object.keys(t)[1]]}))):t,n.value=e,n.text=e,this.emitParameters())},deleteParam:function(t){this.parameters.data.splice(t,1),this.emitParameters()},activateParam:function(t,e){if(t._active=!t._active,this.emitParameters(),!e)return!1;var a=$(e.target).closest("li").find(".highlight-text");console.log(a),setTimeout((function(){return a.eq(1).focus()}),100)},negateParam:function(t){-1!=t.leftText.toLowerCase().indexOf("not")?t.leftText=t.leftText.toLowerCase().replace("not",""):t.leftText="not"+t.leftText},likeParam:function(t){this.parameters.data[t].like=this.parameters.data[t].like?!this.parameters.data[t].like:1,this.emitParameters()},valueParam:function(t){var e=t.value;try{var a=JSON.parse(e);if("object"!=Object(o["a"])(a)||a.length)return e;a.sql;var n=a.descripcion;return n}catch(ja){return e}},setNewOrder:function(t){var e=["-","asc","desc"],a=this.parameters.data[t]._orderby,n=-1==e.indexOf(a)?0:e.indexOf(a),i=n+1>e.length-1?0:n+1,r=e[i];return this.parameters.data[t]._orderby=r,this.emitParameters(),r},setQuery:function(t){this.parameters.data=this.parameters.data.concat(t),this.emitParameters()},editKeyName:function(t,e){var a=JSON.cc(this.parameters.data);a[t].key=$(e.target).text(),this.parameters.data=a,this.emitParameters()},editAliasName:function(t,e){var a=JSON.cc(this.parameters.data);a[t].alias=$(e.target).text(),this.parameters=Object.assign(this.parameters,{data:a}),this.emitParameters()},sortableStop:function(t,e){var a=$(this.$refs.lista).find("li"),n=[];a.each((function(){n.push(JSON.parse($(this).attr("param")))})),$(this.$refs.lista).sortable("cancel"),this.parameters.data=n,this.emitParameters()},filter:function(){},formChange:function(t){},editParameter:function(t,e){var a=e.target,n=$(a).text(),i=this.parameters.data[t];i.value=n,i.text=n,window.contextList.closeContext(),this.emitParameters()},clear:function(){this.parameters.data=[]},changeOperator:function(t){var e=this.parameters.data[t].operator,a="AND"==e?"OR":"AND";this.parameters.data[t].operator=a,this.emitParameters()},changeType:function(t){var e=this.parameters.data[t].data_type,a="text"==e?"number":"number"==e?"date":"text";this.parameters.data[t].data_type=a,this.emitParameters()},changeText:function(t,e,a){var n=$(e.target).text();this.parameters.data[t][a]=n,this.parameters.data[t][a]=n,this.emitParameters()},textKeyPress:function(t,e,a){t.keyCode;var n=new RegExp(/[^not(]/g),i=new RegExp(/[^)]+/g),r="leftText"==e?n:i,s=$(t.target).text().replace(r,"");$(t.target).html()!=s&&$(t.target).html(s)}},updated:function(){}},Ce=_e,Oe=(a("0c23"),Object(dt["a"])(Ce,ye,Se,!1,null,"9a27d116",null)),$e=Oe.exports,Ne=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"container",staticStyle:{display:"none",position:"absolute",margin:"-5px 0px 0 -5px",padding:"10px",width:"calc(100% - 16px)",height:"calc(100% - 17px)",background:"#f2f2f2",border:"1xp solid gray","z-index":"99999","box-sizing":"border-box"}},[a("div",{staticClass:"custom-title",staticStyle:{padding:"10px","font-size":"17px"}},[t._v(t._s(t.operation)+" serie de registros")]),a("br"),a("table",{staticStyle:{width:"100%"}},[a("tr",[t._m(0),a("td",{staticStyle:{width:"50%","text-align":"right",align:"right"}},[a("button",{staticClass:"btn btn-primary",staticStyle:{float:"right","margin-left":"20px"},on:{click:function(e){return t.hide()}}},[t._v("Cerrar")]),a("button",{staticClass:"btn btn-primary",staticStyle:{float:"right","margin-left":"20px"},on:{click:function(e){return t.clear()}}},[t._v("Borrar")]),a("button",{staticClass:"btn btn-primary",staticStyle:{float:"right","text-transform":"capitalize","margin-left":"20px"},on:{click:function(e){return t.operate()}}},[t._v(t._s(t.operation))])])])]),a("br"),a("div",{staticStyle:{overflow:"auto",height:"calc(100% - 120px)"}},[t._l(t.parameters,(function(e,n){return a("div",[a("label",{staticStyle:{"font-weight":"normal"}},[t._v(t._s(e.alias))]),a("Field",{staticStyle:{height:"24px",width:"400px"},attrs:{keyName:t.keyParam(e),type:e.type,singlecheck:!0,value:{value:e.series.replaceValue,text:e.text,paramIndex:n}},on:{input:t.setState}})],1)})),a("div",{staticStyle:{float:"none",clear:"both"}})],2)])},Te=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("td",[a("ul",[a("li",[t._v("- Sólo se pueden modificar campos de la tabla principal (los demás no se muestran en este formulario).")]),a("li",[t._v("- Actua sobre la serie de registros seleccionados.")]),a("li",[t._v("- Sólo altera el contenido de los campos aquí cumplimentados.")])])])}],Le=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"container"},[a("textarea",{staticClass:"form-control",staticStyle:{height:"100%",width:"100%",resize:"none","font-size":"11px"},on:{keyup:function(e){t.internalValue.text=e.target.value,t.emitContent()},focus:function(e){return t.openContext(e)},blur:function(e){return t.closeContext()}}},[t._v(t._s(t.internalValue.text))])])},je=[],qe={components:{},props:{keyName:String,value:Object,type:String,singlecheck:Boolean},data:function(){return{internalValue:this.value}},computed:{},watch:{value:function(t,e){this.internalValue=t}},methods:{openContext:function(t){window.contextList.openContext(this.keyName,$(t.target),this.internalValue.value,this.type,this.contextListCheckClick,!1,this.singlecheck)},closeContext:function(t){window.contextList.closeContext()},contextListCheckClick:function(t){var e,a;if(t.map){var n=t[0];e=JSON.stringify(t.map((function(t){return t[Object.keys(t)[1]]}))),a=n[Object.keys(n)[0]]}else e=t,a=t;this.internalValue.text=e,this.internalValue.value=a,this.emitContent()},emitContent:function(){this.$emit("input",JSON.cc(this.internalValue))}}},Me=qe,Ee=Object(dt["a"])(Me,Le,je,!1,null,null,null),Pe=Ee.exports,Ve={components:{Field:Pe},props:{operation:String,fields:Array},data:function(){return{parameters:[]}},computed:{},watch:{fields:function(t,e){var a=this;t.forEach((function(t){a.clearParam(t);var e=a.keyParam(t);a.parameters.forEach((function(n){var i=a.keyParam(n);e==i&&a.copyParam(t,n)}))})),this.parameters=JSON.cc(t)}},methods:{show:function(){$(this.$refs.container).show()},hide:function(){$(this.$refs.container).hide()},clear:function(){var t=this;this.parameters.forEach((function(e){t.clearParam(e)}))},operate:function(){if(!confirm("Alterar la serie de registros?"))return!1;this.$emit("operate",this.parameters)},clearParam:function(t){t.value="",t.text="",t.series={},t.series.replaceValue=""},copyParam:function(t,e){t.value=e.value,t.text=e.text,t.series&&e.series&&(t.series.replaceValue=e.series.replaceValue)},keyParam:function(t){return t.reference?t.reference:t.key},setState:function(t){t=JSON.cc(t);var e=this.parameters[t.paramIndex];e.text=t.text,e.series||(e.series={}),e.series.replaceValue=t.value}}},ze=Ve,Fe=Object(dt["a"])(ze,Ne,Te,!1,null,null,null),He=Fe.exports,Ie={components:{ItemEditor:we,SimpleTable:ht,Queryeditor:$e,Toolbar:Vt,Ly:qt,Series:He},props:{multiline:String,ventana:Object,filter:Object,overflow:Boolean,formSetValues:Function,keysSettings:Object},data:function(){var t=this;return{series:{operation:"sobreescribir"},checkedIndexes:[],admin:this.api.parsedSearch.admin,show:{queryEditor:!0},buttons:[{label:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 44 44" xmlns:xlink="http://www.w3.org/1999/xlink" enable-background="new 0 0 44 44"><g><circle cx="20" cy="20" r="7"></circle><path d="m22,0c-12.2,0-22,9.8-22,22s9.8,22 22,22 22-9.8 22-22-9.8-22-22-22zm12.7,33.3l-1.4,1.4c-0.4,0.4-1,0.4-1.4,0l-5.4-5.4c-0.2-0.2-0.4-0.2-0.6-0.1-1.7,1.1-3.7,1.7-5.9,1.7-6.1,0-11-4.9-11-11s4.9-11 11-11 11,4.9 11,11c0,2.2-0.6,4.2-1.7,5.9-0.1,0.2-0.1,0.5 0.1,0.6l5.4,5.4c0.3,0.5 0.3,1.1-0.1,1.5z"></path></g></svg>',onClick:function(){return t.loadPage()},helpCode:"list-toolbar-loadpage"},{label:'<svg data-help-code="list-toolbar-clear" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 330.5 330.5"><path d="M178.3 136.6l16.4 16.4 69.7-69.7c2.3-2.3 3.4-5.2 3.4-8.2 0-3-1.1-5.9-3.4-8.2 -4.5-4.5-11.8-4.5-16.4 0L178.3 136.6zM172.3 140.2l-0.7-0.7 -12.4 12.4 -7.7 7.7 20.4 20.4 8.3-8.3 11.8-11.8 -0.9-0.9 -1.2-1.2 -16.4-16.4L172.3 140.2zM66.8 197.2c-0.1 0-0.2 0.1-0.3 0.1 -0.5 0.1-0.9 0.3-1.3 0.6l-0.2 0.1L65 198c-0.5 0.3-0.8 0.7-1.2 1.2 -0.3 0.5-0.6 1-0.8 1.6 -0.5 1.7-0.3 3.7 1.3 4.9 3.8 3 7.7 6 11.6 8.9l0.7-0.3 1.7-0.7L80 213l14.1-5.4 20.6-7.9 -14.3 16.6 -8 9.2 -1.1 1.3 -1.1 1.3 -1.1 1.3c0.8 0.3 1.6 0.4 2.5 0.2 0.5-0.1 1-0.3 1.6-0.5 0.1 0 0.1-0.1 0.2-0.1 0.6-0.3 1.1-0.5 1.7-0.7l3.3 3.3c0 0.8-0.1 1.5-0.1 2.3 -0.1 0.7-0.1 1.5-0.2 2.2 -0.1 1.1-0.3 2.2-0.6 3.3 -0.6 2.5 0.8 5.7 3.5 6.2 4.4 0.9 8 2.4 11.1 4.5 3.5 2.4 6.4 5.4 9.1 9.1 1.3 1.8 2.6 3.6 3.9 5.6 1 1.6 2.6 2.3 4.1 2.3 0.7 0 1.4-0.1 2-0.4 2.4-0.9 4.2-3.4 3.1-6.2l32.3-75.5 -20.2-20.2L66.8 197.2zM165.2 330.5L165.2 330.5C74 330.5 0 256.5 0 165.2v0C0 74 74 0 165.2 0h0c91.3 0 165.2 74 165.2 165.2v0C330.5 256.5 256.5 330.5 165.2 330.5z"/></svg>',onClick:function(){if(!confirm("¿Borrar los parámetros de filtrado?"))return!1;this.$store.commit("Ventana_injectQE",{indexVentana:this.ventana.index,qeParams:[]}),this.$refs.qe.clear()}.bind(this)},{label:'<svg data-help-code="list-toolbar-excel" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M371.5 128h-67.6L256 198.5 208.1 128h-67.6l81.1 121.2L130.1 384h131.1v-45.8h-30.3l25.1-37.5 55.7 83.3h70.2l-91.5-134.8L371.5 128zM512 256c0 141.4-114.6 256-256 256S0 397.4 0 256 114.6 0 256 0 512 114.6 512 256z"/></svg>',onClick:function(){this.downloadListAsFile()}.bind(this)},{label:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 256" style="transform:rotate(180deg)"><path d="M180.52,149v33.92H76.75V149H56.81v43.9a10,10,0,0,0,10,10H190.47a10,10,0,0,0,10-10V149H180.52Zm-48.3-3.08c3.39-3.38,27.68-35.63,27.68-35.63s4.3-4.29-1.41-4.29H143.63V56.41s0.06-2.06-2.6-2.06H118.39c-3.69,0-3,2.45-3,2.45V107H99.25c-4.71,0-.37,4.1-0.37,4.1l28.55,34.5S129.78,148.37,132.22,145.92ZM128,256h0A128,128,0,0,1,0,128H0A128,128,0,0,1,128,0h0A128,128,0,0,1,256,128h0A128,128,0,0,1,128,256Z"></path></svg>',helpCode:"list-toolbar-loadvista",onClick:function(){var t=this.$store.state.selectedQuery,e=JSON.cc(t.queryEditor.params),a=this.$store.getters.qeParams(this.ventana.index);a||(a=[]),this.$store.commit("Ventana_injectQE",{indexVentana:this.ventana.index,qeParams:a.concat(e)})}.bind(this)},{label:'<svg data-help-code="list-toolbar-savevista" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 256"><path d="M180.52,149v33.92H76.75V149H56.81v43.9a10,10,0,0,0,10,10H190.47a10,10,0,0,0,10-10V149H180.52Zm-48.3-3.08c3.39-3.38,27.68-35.63,27.68-35.63s4.3-4.29-1.41-4.29H143.63V56.41s0.06-2.06-2.6-2.06H118.39c-3.69,0-3,2.45-3,2.45V107H99.25c-4.71,0-.37,4.1-0.37,4.1l28.55,34.5S129.78,148.37,132.22,145.92ZM128,256h0A128,128,0,0,1,0,128H0A128,128,0,0,1,128,0h0A128,128,0,0,1,256,128h0A128,128,0,0,1,128,256Z"></path></svg>',onClick:function(){if(!confirm("¿Crear una vista con este filtro?"))return!1;var t=this.ventana.data.table,e=JSON.cc(this.$refs.qe.settings),a=JSON.cc(this.orderby),n=this.tablesRelation,i=n.joinSyntax,r=(new Date).valueOf().toString(),s={table:t,joinSyntax:i,queryEditor:e,orderby:a};this.api.getIdentitiesForTableSet(t,function(t){s.identities=t,s.whereSql=this.grid.whereSql,s.name=r,s.customName="",s.tableNames=n.names,s.descripcion="",s.fecha=this.utils.getSpDate(new Date),s.tipo="Normal",this.$store.commit("Query_add",{query:s,cb:function(t){console.log(t),window.circus.loadQueries(),window.circus.showHelpBox({title:"Vista creada",text:"Se ha creado una nueva vista con el filtro actual."},!0)}})}.bind(this))}.bind(this)},{label:'<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\t viewBox="0 0 512 512" style="enable-background:new 0 0 512 512;" xml:space="preserve"><g>\t<g>\t\t<path d="M256,0C114.844,0,0,114.839,0,256s114.844,256,256,256s256-114.839,256-256S397.156,0,256,0z M146.574,186.42\t\t\tl139.161-92.308c7.654-5.093,18.025-3.017,23.146,4.686c5.099,7.686,3,18.047-4.686,23.146l-118.177,78.392l118.177,78.392\t\t\tc7.686,5.099,9.785,15.46,4.686,23.146c-3.219,4.848-8.523,7.469-13.927,7.469c-3.175,0-6.381-0.897-9.219-2.783l-139.161-92.308\t\t\tc-4.664-3.093-7.469-8.317-7.469-13.916C139.105,194.737,141.911,189.512,146.574,186.42z M356.196,372.895H155.804\t\t\tc-9.219,0-16.699-7.475-16.699-16.699c0-9.225,7.48-16.699,16.699-16.699h200.391c9.219,0,16.699,7.475,16.699,16.699\t\t\tC372.895,365.42,365.415,372.895,356.196,372.895z"/>\t</g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g></svg>',onClick:function(){var t={};this.$refs.qe.parameters.data.forEach((function(e){var a=e.reference,n=e.value;t[a]=n})),this.formSetValues(t)}.bind(this),helpCode:"list-toolbar-sendtoform"}],grid:{rows:[],rowCount:0,page:0,recXPag:100,loadedRecsNumber:0,whereSql:"",selectSql:"",columns:{names:[],widths:[],types:[]}},queryEditor:{params:{}},orderby:{}}},watch:{filter:function(t,e){var a=this,n=Object.keys(t).map((function(e){return Object.assign({},t[e],{key:a.api.getListColumnSql(e),alias:a.shortAlias(a.api.getLiteral(e)),reference:e,operator:"AND",leftText:"",rightText:"",_active:"%"!==t[e].value,_inlist:!0,data_type:a.utils.getBasicDataType(t[e].data_type),_extended:!1,_extendKey:!1,_orderby:"-"})}));n[0].text="",n[0].value="";var i=this.$store.getters.qeParams(this.ventana.index);i||(i=[]);var r=n.concat(i);this.$store.commit("Ventana_injectQE",{indexVentana:this.ventana.index,qeParams:r})}},computed:{series_parameters:function(){var t=this.tablesRelation.joinSyntax.split(" INNER JOIN ")[0],e=JSON.cc(this.qeParams.filter((function(e){var a=e.reference?e.reference:e.key;return-1!=a.toLowerCase().indexOf(t.toLowerCase())})));return e},buttonsUser:function(){var t=[];return this.buttons.forEach((function(e,a){0!=a&&2!=a||t.push(e)})),t},distinct:{get:function(){var t=this.$store.state.ventanas.data[this.ventana.index].queryeditor.distinct;return t},set:function(t){this.$store.commit("set_distinct",{indexVentana:this.ventana.index,value:t})}},qeParams:{get:function(){var t=this.$store.state.ventanas.data[this.ventana.index].queryeditor.parameters;return t},set:function(t){this.$store.commit("Ventana_injectQE",{indexVentana:this.ventana.index,qeParams:t})}},columns:function(){var t=this.ventana.data.table,e=(this.ventana.data.fields,this.ventana.data.identities),a=e[0],n=this.distinct,i=n?["1 as PK_ID"]:[t+"."+a+" as PK_ID"],r=this.$refs.qe.settings.columns;return r.forEach((function(t){-1==i.indexOf(t.toLowerCase())&&i.push(t)})),_.uniq(i)},pkName:function(){var t=this.ventana.data.table.split("."),e=t.length>1?t[2]:t[0],a=this.ventana.data.fields,n=a.filter((function(t){return t.is_identity&&t.table_name.toLowerCase()==e.toLowerCase()}));return n[0]||console.error("La tabla ".concat(e," no tiene clave primaria definida.")),n[0].column_name},tablesRelation:function(){return this.api.getTablesRelation(this.ventana.data.table)}},updated:function(){},mounted:function(){},methods:{activateParam:function(t){this.$refs.qe.activateParam(this.$refs.qe.parameters.data[t])},setNewOrder:function(t){this.$refs.qe.setNewOrder(t)},shortAlias:function(t){var e=t.split(".");return e[e.length-1]},clickFunc:function(t,e){console.log("target"),e.stopPropagation();var a="path"==e.target.tagName?e.target.closest("svg"):e.target,n=$(a).closest("div.header-cell");if("number"!=n.attr("type"))return!1;switch(t){case"SUM":t="AVG";break;case"AVG":t="DISTINCT";break;case"DISTINCT":t="SUM";break}n.find("select").val(t),"SUM"==t&&n.find(".button-operation svg").addClass("hide").eq(0).removeClass("hide"),"AVG"==t&&n.find(".button-operation svg").addClass("hide").eq(1).removeClass("hide"),"DISTINCT"==t&&n.find(".button-operation svg").addClass("hide").eq(2).removeClass("hide")},open_serie:function(t){this.$refs.popup.show()},operate_serie:function(t){var e=this;if(console.log(this.series.operation),console.log(JSON.cc(t)),!this.checkedIds||!this.checkedIds.length)return window.log("Operación cancelada. No hay ningún registro seleccionado.","darkorange"),!1;var a=this.tablesRelation.joinSyntax.split(" INNER JOIN ")[0],n=t.filter((function(t){return t.series&&""!=t.series.replaceValue})).map((function(t){var a=t.reference?t.reference:t.key,n=t.series.replaceValue;return"sobreescribir"==e.series.operation.toLowerCase()?a+" = '"+n+"'":a+" = NULL"})),i="UPDATE "+a+" SET "+n,r=this.ventana.data.identities,s=r[0];if(!n.length)return window.log("Operación cancelada. No ha rellenado ningún campo.","darkorange"),!1;var o=this.checkedIds.map((function(t){return"".concat(i," WHERE ").concat(s," = ").concat(t)})),c="";o.forEach((function(t){return c+=t+" "})),console.log(c),this.api.$dbq({sqlSyntax:c,dbID:this.api.getTableConnectionId(this.ventana.data.table)},(function(t){window.log(o.length+" registros alterados.","green")}),!0,!0)},scrollHeaders:function(t){$(this.$refs.computer).css({"margin-left":-1*t})},resizeHeaders:function(t){var e=$(this.$refs.computer).find("div.header-cell");this.grid.columns.widths=t,e.each((function(e){$(this).css({"max-width":t[e+1]+12+"px","min-width":t[e+1]+12+"px",width:t[e+1]+12+"px"})}))},qeParamUpdate:function(t){this.$store.commit("Ventana_injectQE",{indexVentana:this.ventana.index,qeParams:t})},tabulator:function(t){if(!t.length)return"";t.forEach((function(t){return delete t[Object.keys(t)[0]]}));var e=$("<table/>"),a={border:"1px solid #eee",padding:"5px"},n=t[0],i=$("<tr/>");return e.append(i),Object.keys(n).forEach((function(t){var e=$("<td/>").css(a);i.append(e.text(t))})),t.forEach((function(t){var n=$("<tr/>");e.append(n),Object.keys(t).forEach((function(e){var i=$("<td/>").css(a);n.append(i.text(t[e]))}))})),e.wrap("<div/>").parent().html()},downloadListAsFile:function(){var t=this;this.loadPage(2,(function(){var e=new Blob(["\ufeff",t.tabulator(JSON.cc(t.grid.rows))],{type:"text/plain"}),a=window.URL.createObjectURL(e),n=document.createElement("a");document.body.appendChild(n),n.style="display: none",n.href=a,n.download="Listado.xls",n.click()}))},containerResize:function(){this.$refs.Tabla.resizeHeaders()},headerClick:function(t){var e=t.key,a=t.target,n=t.index,i=this.qeParams[n].reference;console.log(i),window.contextDialog({key:e,target:a,reference:i})},checkClick:function(t){var e=this,a=[];t.forEach((function(t){a.push(e.grid.rows[t].PK_ID)})),this.checkedIds=a,this.checkedIndexes=t},rowClick:function(t){},paramsToForm:function(){},orderBy:function(t){this.orderby=JSON.cc(t),console.log(JSON.cc(t))},qeHasChanged:function(){var t=this.$refs.qe.settings!=this.grid.qeSettings||this.qeHasChanged.changed;return this.qeHasChanged.changed=!1,t},telon:function(t){var e=$(this.$refs.toolbar).find("button"),a=e.eq(1).add(e.eq(2)).add(e.eq(6));t?(a.prop("disabled",!0).css({cursor:"progress","text-decoration":"line-through"}),$(this.$refs.listado).css({cursor:"progress"}),$("body").css({cursor:"progress"})):(a.prop("disabled",!1).css({cursor:"default","text-decoration":"none"}),$(this.$refs.listado).css({cursor:"default"}),$("body").css({cursor:"default"}))},compute:function(t){var e=this;this.grid.columns.names=this.columns.map((function(t){var a,n=t.toLowerCase().split(" as "),i=(n[0],n.length>1?n[1]:n[0]),r=JSON.cc(e.qeParams);return Object.keys(r).forEach((function(t){var e=r[t].alias;"["+e.toLowerCase()+"]"==i.toLowerCase()&&(a=r[t].reference)})),{sql:a,label:i}})),this.grid.columns.names.splice(0,1),this.grid.columns.names.forEach((function(t,a){e.grid.columns.types[a]="text",Object.keys(e.keysSettings).forEach((function(n){t.sql.toLowerCase()==n.toLowerCase()&&(e.grid.columns.types[a]=e.utils.getBasicDataType(e.keysSettings[n].data_type))}))}));var a=[];if(this.grid.columns.names.forEach((function(t,n){var i=e.grid.columns.types[n],r=$(e.$refs["computed_"+t.label]).find("select option:selected").val();-1==t.sql.toLowerCase().indexOf("select")?"number"==i?r?"DISTINCT"!=r?a.push(r+"("+t.sql+") as "+t.label):a.push("COUNT(DISTINCT("+t.sql+")) as "+t.label):a.push("'' as "+t.label):"DISTINCT"==r&&a.push("COUNT(DISTINCT("+t.sql+")) as "+t.label):a.push("'' as "+t.label)})),!a.length)return!1;var n=JSON.cc(t);n.columns=a,this.api.$dbq(n,(function(t){var a=JSON.cc(t[0]);Object.keys(a).forEach((function(t){$(e.$refs["computed_["+t+"]"]).find("span").html(a[t]).attr("title",a[t]),$(e.$refs["computed_["+t+"]"]).find(".button-operation *").attr("title",a[t])}))}))},set_distinct:function(){this.$store.commit("set_distinct",{indexVentana:this.ventana.index,value:!this.distinct}),this.qeHasChanged.changed=!0},keyDownSearchField:function(t,e){if(13===t.keyCode)return t.preventDefault(),!1},alterSearchString:function(t,e){var a=t.target.innerHTML,n=JSON.cc(this.qeParams);n[e].text=a,n[e].value=a,this.qeParams=n},focusSearchField:function(t,e,a){var n=$(t.target);a?(n.removeClass("focused"),window.contextList.closeContext(),this.alterSearchString(t,e)):(n.addClass("focused"),this.$refs.qe.openContext(e,t,this.$refs.qe.parameters.data[e]))},getParamSearchString:function(t){var e=this.$refs.qe.parameters.data[t].text;return"[]"==e&&(e=""),e},loadList:function(t,e){var a=this,n=this.ventana.data.table,i=this.tablesRelation.joinSyntax,r=this.$refs.qe.settings.sqlSyntax,s=r.length?"WHERE "+r:"",o=this.pkName,c="pkname = '".concat(n,".").concat(o,"'"),l=("sql=delete DBH_listado INSERT INTO DBH_listado (sessionId,idusuario,idlistado,pkname) \n            select 1,1,".concat(o,",'").concat(n,".").concat(o,"' FROM ").concat(i," ").concat(s," \n            SELECT count(idlistado) as noFilas FROM DBH_listado WHERE ").concat(c),"sql=select ".concat(o," as id FROM ").concat(i," ").concat(s),this.api.getTableConnectionId(n),"SELECT ".concat(this.distinct?"DISTINCT ":""," ").concat(this.columns," FROM ").concat(i,"  ").concat(r?"WHERE "+r:""));this.grid.loadedRecsNumber=0,this.api.$dbq({sqlSyntax:"SELECT COUNT(*) as recnum FROM ("+l+") as a",dbID:this.api.getTableConnectionId(n)},(function(n){a.grid.rowCount=n[0].recnum?n[0].recnum:0,a.grid.whereSql=s,a.grid.qeSettings=a.$refs.qe.settings,a.grid.page=0,a.grid.rows=[],a.checkedIds=[],a.checkedIndexes=[],a.loadPage(t,e)}),!1,!0)},loadPage:function(t,e){var a=this;this.telon(1),window.circus.panels.form=!1,window.circus.panels.bottom=!1;var n=this.ventana.data.table,i=this.columns,r=this.tablesRelation.joinSyntax,s=this.$refs.qe.settings.sqlSyntax,o=s.length?s:"";if(this.compute({schemaSyntax:r,whereSyntax:o,dbID:this.api.getTableConnectionId(n)}),this.qeHasChanged())this.loadList(t,e);else{if(!this.grid.rowCount)return this.telon(0),!1;if(this.grid.rowCount==this.grid.loadedRecsNumber)return 2==t?(e&&e(),void this.telon(0)):(confirm("Se han cargado la totalidad de los registros de este listado.\n\nDesea comenzar la carga del listado nuevamente desde el principio?")?this.loadList(t):(e&&e(),this.telon(0)),!1);var c=this.pkName,l=("pkname = '".concat(n,".").concat(c,"'"),""!=this.$refs.qe.settings.orderBy?this.$refs.qe.settings.orderBy:n+"."+c),d=this.grid.recXPag,u=this.grid.page*d,h="sql=SELECT ".concat(this.distinct?"DISTINCT ":""," ").concat(i," FROM ").concat(r," ").concat(this.grid.whereSql," ORDER BY ").concat(l," OFFSET ").concat(u," ROWS FETCH NEXT ").concat(d," ROWS ONLY");this.grid.page++;var f=this.grid.page*this.grid.recXPag;(f>this.grid.rowCount||t)&&(f=this.grid.rowCount),this.grid.selectSql=h.substring(4),console.log(this.grid.selectSql);var p={columns:i,schemaSyntax:r,whereSyntax:o,orderbyColumns:l,offset:u,pageSize:d,dbID:this.api.getTableConnectionId(n),distinct:this.distinct};t&&(p.pageSize=999999999),this.api.$dbq(p,(function(t){a.grid.rows=a.grid.rows.concat(t),a.grid.loadedRecsNumber=f,a.telon(0),window.circus.showHelpBox({title:"Cargados ".concat(f," registros"),text:"Se han cargado los siguientes ".concat(f," registros")}),e&&e()}))}}}},De=Ie,Re=(a("613a"),Object(dt["a"])(De,re,se,!1,null,"5b5daed1",null)),Be=Re.exports,Ae={props:["ventana","isInline","index","switchVentana","panels"],components:{Ly:qt,Formulario:ie,Toolbar:Vt,Listado:Be},data:function(){var t=this;return{configFilesList:[],parentTables:this.api.getDirectParents(this.ventana.data.table),childTables:this.api.getDirectSuns(this.ventana.data.table),tree:!0,formver:!0,list:!0,show:!0,overflow:!this.isInline,itemEditor:{branchs:[{key:"form"},{key:"list"}]},formFilterState:{data:{},settings:this.keysSettings},form:{data:this.formDataBlanked()},admin:this.api.parsedSearch.admin,buttons2:[{label:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16" viewBox="0 0 16 16"><path fill="#444444" d="M0 16h16v-16h-16v16zM3 1v1h1v-1h11v14h-12v-1h-1v1h-1v-1h1v-1h-1v-1h1v-1h-1v-1h1v-1h-1v-1h1v-1h-1v-1h1v-1h-1v-1h1v-1h-1v-1h1v-1h1z"></path><path fill="#444444" d="M2 12h1v1h-1v-1z"></path><path fill="#444444" d="M3 13h1v1h-1v-1z"></path><path fill="#444444" d="M3 11h1v1h-1v-1z"></path><path fill="#444444" d="M3 9h1v1h-1v-1z"></path><path fill="#444444" d="M2 10h1v1h-1v-1z"></path><path fill="#444444" d="M2 8h1v1h-1v-1z"></path><path fill="#444444" d="M2 6h1v1h-1v-1z"></path><path fill="#444444" d="M3 7h1v1h-1v-1z"></path><path fill="#444444" d="M3 5h1v1h-1v-1z"></path><path fill="#444444" d="M3 3h1v1h-1v-1z"></path><path fill="#444444" d="M2 4h1v1h-1v-1z"></path><path fill="#444444" d="M2 2h1v1h-1v-1z"></path></svg>',helpCode:"",onClick:function(){t.$emit("panelSwitch","form")}},{label:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16" viewBox="0 0 16 16"><path fill="#444444" d="M16 16v-16h-16v16h16zM1 13h1v-1h-1v-11h14v12h-1v1h1v1h-1v-1h-1v1h-1v-1h-1v1h-1v-1h-1v1h-1v-1h-1v1h-1v-1h-1v1h-1v-1h-1v1h-1v-1h-1v-1z"></path><path fill="#444444" d="M12 13h1v1h-1v-1z"></path><path fill="#444444" d="M13 12h1v1h-1v-1z"></path><path fill="#444444" d="M11 12h1v1h-1v-1z"></path><path fill="#444444" d="M9 12h1v1h-1v-1z"></path><path fill="#444444" d="M10 13h1v1h-1v-1z"></path><path fill="#444444" d="M8 13h1v1h-1v-1z"></path><path fill="#444444" d="M6 13h1v1h-1v-1z"></path><path fill="#444444" d="M7 12h1v1h-1v-1z"></path><path fill="#444444" d="M5 12h1v1h-1v-1z"></path><path fill="#444444" d="M3 12h1v1h-1v-1z"></path><path fill="#444444" d="M4 13h1v1h-1v-1z"></path><path fill="#444444" d="M2 13h1v1h-1v-1z"></path></svg>',helpCode:"",onClick:function(){t.$emit("panelSwitch","bottom")}}],buttons:[{label:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 256" style="transform:rotate(180deg)"><path d="M180.52,149v33.92H76.75V149H56.81v43.9a10,10,0,0,0,10,10H190.47a10,10,0,0,0,10-10V149H180.52Zm-48.3-3.08c3.39-3.38,27.68-35.63,27.68-35.63s4.3-4.29-1.41-4.29H143.63V56.41s0.06-2.06-2.6-2.06H118.39c-3.69,0-3,2.45-3,2.45V107H99.25c-4.71,0-.37,4.1-0.37,4.1l28.55,34.5S129.78,148.37,132.22,145.92ZM128,256h0A128,128,0,0,1,0,128H0A128,128,0,0,1,128,0h0A128,128,0,0,1,256,128h0A128,128,0,0,1,128,256Z"></path></svg>',helpCode:"config-load",onClick:function(){var e=$("#configFileSelect option:selected").text();t.loadConfigFile(e),console.log(e)}},{label:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 256"><path d="M180.52,149v33.92H76.75V149H56.81v43.9a10,10,0,0,0,10,10H190.47a10,10,0,0,0,10-10V149H180.52Zm-48.3-3.08c3.39-3.38,27.68-35.63,27.68-35.63s4.3-4.29-1.41-4.29H143.63V56.41s0.06-2.06-2.6-2.06H118.39c-3.69,0-3,2.45-3,2.45V107H99.25c-4.71,0-.37,4.1-0.37,4.1l28.55,34.5S129.78,148.37,132.22,145.92ZM128,256h0A128,128,0,0,1,0,128H0A128,128,0,0,1,128,0h0A128,128,0,0,1,256,128h0A128,128,0,0,1,128,256Z"></path></svg>',helpCode:"config-save",onClick:function(){var e=t.api.saveTree("",1);t.configFilesList.filter((function(t){return t.toLowerCase()==e.toLowerCase()})).length||t.configFilesList.push(e),window.circus.showHelpBox({title:"Configuración Guardada",text:"Se ha guardado la configuración actual en el archivo "+e})}},{label:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 330.5 330.5"><path d="M178.3 136.6l16.4 16.4 69.7-69.7c2.3-2.3 3.4-5.2 3.4-8.2 0-3-1.1-5.9-3.4-8.2 -4.5-4.5-11.8-4.5-16.4 0L178.3 136.6zM172.3 140.2l-0.7-0.7 -12.4 12.4 -7.7 7.7 20.4 20.4 8.3-8.3 11.8-11.8 -0.9-0.9 -1.2-1.2 -16.4-16.4L172.3 140.2zM66.8 197.2c-0.1 0-0.2 0.1-0.3 0.1 -0.5 0.1-0.9 0.3-1.3 0.6l-0.2 0.1L65 198c-0.5 0.3-0.8 0.7-1.2 1.2 -0.3 0.5-0.6 1-0.8 1.6 -0.5 1.7-0.3 3.7 1.3 4.9 3.8 3 7.7 6 11.6 8.9l0.7-0.3 1.7-0.7L80 213l14.1-5.4 20.6-7.9 -14.3 16.6 -8 9.2 -1.1 1.3 -1.1 1.3 -1.1 1.3c0.8 0.3 1.6 0.4 2.5 0.2 0.5-0.1 1-0.3 1.6-0.5 0.1 0 0.1-0.1 0.2-0.1 0.6-0.3 1.1-0.5 1.7-0.7l3.3 3.3c0 0.8-0.1 1.5-0.1 2.3 -0.1 0.7-0.1 1.5-0.2 2.2 -0.1 1.1-0.3 2.2-0.6 3.3 -0.6 2.5 0.8 5.7 3.5 6.2 4.4 0.9 8 2.4 11.1 4.5 3.5 2.4 6.4 5.4 9.1 9.1 1.3 1.8 2.6 3.6 3.9 5.6 1 1.6 2.6 2.3 4.1 2.3 0.7 0 1.4-0.1 2-0.4 2.4-0.9 4.2-3.4 3.1-6.2l32.3-75.5 -20.2-20.2L66.8 197.2zM165.2 330.5L165.2 330.5C74 330.5 0 256.5 0 165.2v0C0 74 74 0 165.2 0h0c91.3 0 165.2 74 165.2 165.2v0C330.5 256.5 256.5 330.5 165.2 330.5z"/></svg>',helpCode:"config-delete",onClick:function(){var e=$("#configFileSelect option:selected").text();t.deleteConfigFile(e),t.configFilesList=t.configFilesList.filter((function(t){return t!=e}))}}]}},computed:{childTablesWindows:function(){var t=Object.keys(this.api.getDirectSuns(this.ventana.data.table)),e=this.$store.state.ventanas.data.map((function(t,e){return{name:t.name,table:t.table,index:e}})),a=e.filter((function(e){return-1!=t.indexOf(e.table.toLowerCase())}));return a},parentTablesWindows:function(){var t=Object.keys(this.api.getDirectParents(this.ventana.data.table)),e=this.$store.state.ventanas.data.map((function(t,e){return{name:t.name,table:t.table,index:e}})),a=e.filter((function(e){return-1!=t.indexOf(e.table.toLowerCase())}));return a},availableTables:function(){var t=this.$store.state.database.tables;return Object.keys(t)},tabs:function(){var t=this.ventana.data.table,e=this.api.getTablesRelation(t);return e},keysSettings:function(){var t,e=this,a={};return this.ventana.data.fields.forEach((function(n){var i=!!n.dbsettings&&n.dbsettings.list;t={data_type:n.data_type},i?(Object.assign(t,{list:{values:i}}),a[e.fieldUniqueId(n)]=t):a[e.fieldUniqueId(n)]=t})),a},toolbarButtons:function(){return[{label:this.formver?" < ":" > ",onClick:this.toolbarClick}]}},methods:Object(l["a"])({},Object(h["b"])(["setVentana"]),{loadConfigFile:function(t){this.api.loadConfig(t)},deleteConfigFile:function(t){var e=this;if(!confirm("Eliminar "+t+"?"))return!1;this.api.deleteConfig(t,(function(t){alert(t),e.loadFilesList($("#configFileSelect")[0])}))},getRelations:function(t,e){var a=[];t.forEach((function(t,n){var i='<li style="text-transform:">'+t+" ("+e[n]+")</li>";a.push(i)}));var n=$("<div/>").append("<titulo>Relaciones</titulo>").append('<ul style="list-style-type: square;padding-left:10px">'+a.toString().replace(/\,/g,"")+"</ul>");return n.html()},injectChild:function(){var t=this.$refs.listado.$refs.qe,e=t.settings.params,a=this.$refs.childTable.value;this.$refs.childTable.selectedIndex=0;var n=this.$store.getters.qeParams(a);n||(n=[]),this.$store.commit("Ventana_injectQE",{indexVentana:a,qeParams:n.concat(e)}),this.switchVentana(a)},injectParent:function(){var t=this.$refs.listado.$refs.qe,e=t.settings.params,a=this.$refs.parentTable.value,n=this.tabs.joinSyntax,i=this.parentTablesWindows.filter((function(t){return t.index==a}))[0].table,r=this.ventana.data.table.toUpperCase()+" con "+e.filter((function(t){return t._active})).map((function(t){var e=t.value;try{var a=JSON.parse(e);"object"!=Object(o["a"])(a)||a.length||(e=a.descripcion)}catch(ja){}return"".concat(t.alias,": ").concat(e)})),s=this;this.api.getIdentitiesForTableSet(i,(function(e){var o=i+"."+e[0].column_name;console.log(o);var c="SELECT ".concat(o," FROM ").concat(n," ").concat(t.settings.sqlSyntax?" WHERE "+t.settings.sqlSyntax:""),l=JSON.stringify({sql:c,descripcion:r}),d={alias:o,campo:"",data_type:"text",key:o,reference:o,leftText:"",rightText:"",text:l,value:l,vista:"",operator:"AND",_active:!0,_extended:!1,_inlist:!0,_orderby:""};s.$refs.parentTable.selectedIndex=0;var u=s.$store.getters.qeParams(a);u||(u=[]),s.$store.commit("Ventana_injectQE",{indexVentana:a,qeParams:u.concat([d])}),s.switchVentana(a)}))},rowClick:function(t){this.form.data=this.formDataBlanked(),Object.assign(this.form.data,t)},nameChange:function(t){var e=t.target.innerHTML;console.log(e),this.$store.commit("Ventana_setName",{indexVentana:this.index,ventanaName:e})},tableChange:function(t){var e=this;if(!confirm("Cambiar a -"+t.target.value+"- la tabla asociada a esta ventana."))return t.target.value=this.ventana.data.table,!1;var a=t.target.value;this.$store.commit("Ventana_setTable",{indexVentana:this.index,tableName:a}),this.api.getFieldsForTable(a,(function(t){var a=t.fields,n=t.identities;e.$store.commit("Ventana_setFields",{indexVentana:e.ventana.index,fields:a,identities:n}),e.form.data=e.formDataBlanked()}))},toolbarClick:function(t){var e="formver"!=t?t.toLowerCase():"formver";this[e]=!this[e],setTimeout(function(){this.$refs.listado.containerResize()}.bind(this),10)},fieldsOfVentana:function(t){return t.data.fields},tabName:function(t){var e=t.table_name;return e},formFilter:function(t){this.formFilterState.data=t},fieldUniqueId:function(t){var e=t.table_name,a=t.column_name;if(t.literal)return a;var n=t.table_catalog;return n+".dbo."+e+"."+a},formSetValues:function(t){var e=this.formDataBlanked();Object.keys(t).forEach((function(a){"undefined"!=typeof e[a]&&(e[a]=t[a])})),this.form.data=e},formDataBlanked:function(){var t=this,e={};return this.$store.state.ventanas.data[this.index].fields.forEach((function(a){e[t.fieldUniqueId(a)]=""})),e}}),mounted:function(){var t=this;this.api.getFieldsForTable(this.ventana.data.table,(function(e){var a=e.fields,n=e.identities;t.$store.commit("Ventana_setFields",{indexVentana:t.ventana.index,fields:a,identities:n}),t.form.data=t.formDataBlanked()})),this.api.listFiles("./json/",(function(e){t.configFilesList=e})),$(this.$refs.Formulario).resizable({handles:"e"});var e=this;$(window.document).on("keyup",(function(t){13==t.keyCode&&e.$refs.listado.loadPage()}))},updated:function(){$(this.$refs.Formulario).resizable({handles:"e"})}},Je=Ae,Ke=(a("0c81"),Object(dt["a"])(Je,Ht,It,!1,null,"66089717",null)),Ue=Ke.exports,Qe={data:function(){return{}},components:{Ly:qt,Ventana:Ue,Toolbar:Vt},props:["containers","panels"],computed:{ventanas:function(){return this.$store.state.ventanas.data},containerWidth:function(){var t=this.containers.length;return{width:"calc(100% / ".concat(t,")")}}},methods:{visibleVentanas:function(t){var e=this.$store.state.ventanas.data.map((function(t,e){return{index:e,visible:t.visible}})).filter((function(t){return t.visible})).map((function(t){return t.index}));return e},ventanasDelContainer:function(t){var e=this.ventanas.map((function(t,e){return{data:t,index:e}}));if(!t)return e;var a=t.index,n=e.filter((function(t){return-1!=t.data.container.indexOf(a)}));return n},styleVentana:function(t,e){var a=this;if("visible"!=this.containerType(t))return!1;var n=this.ventanasDelContainer(t).filter((function(e){return-1!=a.visibleVentanas(t).indexOf(e.index)})).length,i={height:"calc(100% / ".concat(n,")"),top:"0px",left:0,width:"100%",position:"absolute",border:"0px solid green"};return i},onButtonClick:function(t){var e=$(".window-container"),a=$(".pestanaVentana");e.css({"z-index":-1}),e.eq(t).css({"z-index":1}),a.removeClass("pestanaVentanaSelected").eq(t).addClass("pestanaVentanaSelected")},switchContainerType:function(t){var e=this.containerType(t),a="visible"==e?"scroll":"visible";this.$store.commit("setContainerType",{index:t.index,type:a})},containerName:function(t){return t.data.name},containerType:function(t){return t.data.type},isInlineContainer:function(t){return"scroll"==this.containerType(t)?1:0},toolbarButtons:function(t){var e=this,a=this.ventanasDelContainer(t),n=a.map((function(n){return{label:n.data.name,onClick:function(){return e.onButtonClick(n.index,t)},onClose:function(){1!=a.length&&confirm("Eliminar pestaña?")&&this.$store.commit("Ventana_delete",{index:n.index})}.bind(e)}}));return n.push({label:"+",onClick:function(){var t=a[a.length-1];this.$store.commit("Ventana_clone",{index:t.index})}.bind(this),onClose:function(){}}),n},saveWindowName:function(t,e){this.$store.commit("Ventana_setName",{indexVentana:e,ventanaName:$(t).text()}),$(t).attr("contenteditable",!1)},editWindowName:function(t){$(t).attr("contenteditable",!0).focus()},panelSwitch:function(t){this.$emit("panelSwitch",t)}},mounted:function(){this.onButtonClick(0)}},We=Qe,Ge=(a("5462"),Object(dt["a"])(We,zt,Ft,!1,null,null,null)),Ze=Ge.exports,Xe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Ly",{attrs:{flexbox:"1",column:"1","data-component":"context-menu"}},[a("Ly",[t._v(t._s(t.title)),a("button",{on:{click:function(e){return t.close()}}},[t._v("Close")])]),a("Ly",[a("Toolbar",{attrs:{buttons:t.buttons}})],1),a("Ly",[a("ItemEditor",{attrs:{item:t.item,lists:t.lists,branchs:t.branchs,keysSettings:t.keysSettings},on:{change:t.formChange}})],1)],1)},Ye=[],ta={components:{ItemEditor:we,Ly:qt,Toolbar:Vt},data:function(){return{buttons:[{label:"Save",onClick:this.commitForm}]}},computed:{item:function(){var t=this.$store.state.contextMenu.item;return t||{}},cursor:function(){return this.$store.state.contextMenu.cursor},title:function(){return this.$store.state.contextMenu.title},branchs:function(){return this.$store.state.contextMenu.branchs},lists:function(){return this.$store.state.contextMenu.lists},keysSettings:function(){return this.$store.state.contextMenu.keysSettings}},methods:{formChange:function(t){Object.keys(t).forEach((function(e){return t[e]=t[e].value})),this.$store.dispatch("context-menu",{action:"formChange",item:t})},commitForm:function(t){this.$store.dispatch("context-menu",{action:"save"})},close:function(){this.$store.dispatch("context-menu",{action:"clear"})}},createdd:function(){JSON.parse(JSON.stringify(this.$store.state.contextMenu.campos));this.campos=this.$store.state.contextMenu.campos}},ea=ta,aa=(a("df46"),Object(dt["a"])(ea,Xe,Ye,!1,null,null,null)),na=(aa.exports,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{width:"100%",height:"100%"}},t._l(t.treedata,(function(e){return a("div",{staticClass:"main-node"},[a("div",{staticClass:"label"},[t._v(t._s(e.label))]),Array.isArray(e.content)?t._t("default",t._l(e.content,(function(e){return a("div",{staticClass:"node1"},[t._v(" "+t._s(e)+" ")])}))):t._t("default")],2)})),0)}),ia=[],ra={components:{},props:{treedata:{type:Array,required:!0}},data:function(){return{}},mounted:function(){console.log(this.treedata)}},sa=ra,oa=Object(dt["a"])(sa,na,ia,!1,null,null,null),ca=oa.exports,la=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"context-dialog-container"},[a(t.componentName,{tag:"component",attrs:{componentProps:t.componentProps}})],1)},da=[],ua=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"context-field-editor-container"},[a("div",{staticClass:"encabezado"},[t._m(0),a("b",[t._v(t._s(t.componentProps.reference))])]),a("SimpleTable",{ref:"simpleTable",attrs:{rows:t.rows,hiddenKeys:[],checkable:!0,searchable:!0,selectable:!1,showHeaders:!1,checkedRows:t.checkedRows,singlecheck:!0,searchString:""},on:{rowClick:t.rowClick,checkClick:t.checkClick}})],1)},ha=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{"text-transform":"uppercase"}},[t._v("Cambiar modelo de lista desplegable"),a("br")])}],fa={components:{Toolbar:Vt,SimpleTable:ht},props:{componentProps:{type:Object,required:!0}},data:function(){return{listsModels:JSON.cc(this.$store.state.database.listsModels),lists:JSON.cc(this.$store.state.database.lists)}},computed:{rows:function(){var t=this.listsModels,e=Object.keys(t).map((function(t){return{nombre:t}}));return e},checkedRows:function(){var t=this.listsModels,e=this.lists,a=this.componentProps.reference,n=e[a],i=[];return Object.keys(t).forEach((function(t,e){t==n&&i.push(e)})),i}},methods:{rowClick:function(){},checkClick:function(t){var e=this.componentProps.reference,a=!1;if(t.length&&(a=this.rows[t].nombre),!confirm("Asignar modelo de lista\n\n"+e+" = "+a))return this.$refs.simpleTable.reset(),!1;this.$store.commit("setKey",{path:["database","lists","".concat(e)],val:a}),this.api.saveCircusConfig(),window.circus.showHelpBox({title:"Modelo de lista cambiado",text:"Se ha canbiado el modelo de lista asignado al campo ".concat(e," a ").concat(a)})}},mounted:function(){}},pa=fa,va=(a("35be"),Object(dt["a"])(pa,ua,ha,!1,null,null,null)),ga=va.exports,ma={components:{Toolbar:Vt,contextFieldEditor:ga},props:{componentName:{type:String,required:!0},componentProps:{type:Object,required:!1}},data:function(){return{}},computed:{item:function(){var t=this.$store.state.contextMenu.item;return t||{}}},methods:{},mounted:function(){}},xa=ma,ba=(a("2aea"),Object(dt["a"])(xa,la,da,!1,null,null,null)),wa=ba.exports,ya=W,Sa=j;window.bus=new i["a"],JSON.cc=function(t){return"object"!=Object(o["a"])(t)?t:JSON.parse(JSON.stringify(t))};var ka={install:function(t,e){t.prototype.api=n,t.prototype.utils={getBasicDataType:function(t){var e="text",a="number",n="date";switch(t){case"int":return a;case"float":return a;case"money":return a;case"datetime":return n;case"date":return n;default:return e}},getSpDate:function(t){var e={day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"},a=new Intl.DateTimeFormat("es-ES",e);return a.format(t)},setTextareaHeight:function(t){if("TEXTAREA"==t.tagName){t.style.height=0;var e=1*t.scrollHeight,a=2.8,n=e+a;n=Math.round(n),n<18&&(n=18),t.style.height=n+"px"}}},t.prototype.uniqueid=u.a}};i["a"].use(ka);var _a={store:x,components:{Ly:qt,ToolBar:Vt,Containers:Ze,SimpleTable:ht,ContextList:kt,treeMenu:ca,contextDialog:wa},data:function(){var t=this;return{panels:{form:!0,parameters:!0,top:!0,bottom:!0},treedata_tables:[],helpText:"",showHelpState:!1,logText:[],admin:this.api.parsedSearch.admin,queries:[],contextListData:[],contextList:{contextListData:[],contextListHiddenKeys:[],top:400,left:100,height:300,checkedRows:[],type:"text",comparation:0,leftVal:"",rightVal:""},contextDialog:{show:!1,props:{}},show:{queries:!0,list:!0,formlist:!0},buttons:[{label:"Save Tree",onClick:function(){return ya()}}],lists:[{key:"areas",multiple:!0,values:function(){return t.$store.state.areas.map((function(t,e){return{value:e,text:t.name}}))}()},{key:"container",multiple:!0,values:function(){return t.$store.state.containers.map((function(t,e){return{value:e,text:t.name}}))}()},{key:"table",values:function(){return Object.keys(t.$store.state.database.tables).map((function(t){return{value:t,text:t}}))}()}],keysSettings:{areas:{list:{multiple:!0,values:function(){return t.$store.state.areas.map((function(t,e){return[e,t.name]}))}()}},container:{list:{multiple:!0,values:function(){return t.$store.state.containers.map((function(t,e){return[e,t.name]}))}()}},table:{list:{values:function(){return Sa()}()}}},gridActions:[{button:'<svg style="width:20px;opacity:inherit" data-help-code="general-sql-get" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 56 56"><path d="M28 0C12.6 0 0 12.6 0 28s12.6 28 28 28 28-12.6 28-28S43.4 0 28 0zM40 41H16c-1.1 0-2-0.9-2-2s0.9-2 2-2h24c1.1 0 2 0.9 2 2S41.1 41 40 41zM40 30H16c-1.1 0-2-0.9-2-2s0.9-2 2-2h24c1.1 0 2 0.9 2 2S41.1 30 40 30zM40 19H16c-1.1 0-2-0.9-2-2s0.9-2 2-2h24c1.1 0 2 0.9 2 2S41.1 19 40 19z"/></svg>',func:function(t,e){t.stopPropagation();var a=this.$store.state.queries,n=a[a.length-e-1],i="SELECT ".concat(n.queryEditor.columns," FROM ").concat(n.joinSyntax," ").concat(n.queryEditor.sqlSyntax?" WHERE "+n.queryEditor.sqlSyntax:""," ").concat(n.queryEditor.orderBy?" ORDER BY "+n.queryEditor.orderBy:"");console.log(i),window.prompt("Presione CTRL+C para copiar en el portapapeles. Luego ENTER.",i)}.bind(this)},{button:'<svg style="width:20px" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 52 52"><path d="M26 0C11.7 0 0 11.7 0 26s11.7 26 26 26 26-11.7 26-26S40.3 0 26 0zM38.5 28h-25c-1.1 0-2-0.9-2-2s0.9-2 2-2h25c1.1 0 2 0.9 2 2S39.6 28 38.5 28z"/></svg>',func:function(t,e){if(t.stopPropagation(),!confirm("Eliminar la vista?"))return!1;this.queriesRowDelete(e)}.bind(this)}]}},computed:{globalState:function(){return this.$store.state},queries_old:function(){var t=this;this.api.$dbq({schemaSyntax:"circus.dbo.views",columns:["v_id","v_nombre","v_identificador","v_json"],orderbyColumns:["v_id"],language:"spanish"},(function(t){console.log(t)}));var e=this.$store.state.queries,a=e.map((function(e){var a=e.queryEditor.params,n=new vt(a,t.$store.state.queries),i=n.getWhereText();return{Nombre:e.customName,Identificador:e.name,Fecha:e.fecha,Tabla:e.tableNames[0].toUpperCase(),Columnas:e.queryEditor.params.map((function(t){return t.alias.split(".")[1]})).toString().replace(/,/g,", "),Condiciones:i}}));return _.reverse(a)},areas:function(){var t=this.$store.state.areas.map((function(t,e){return{data:t,index:e}}));return t},visibleAreas:function(){var t=this.areas.filter((function(t){return t.data.visible}));return t},containers:function(){var t=this.$store.state.containers.map((function(t,e){return{data:t,index:e}}));return t},areaHeight:function(){var t=this.visibleAreas.length;return{height:"calc(100% / ".concat(t,")")}}},methods:{autoShowForm:function(t){$(t.target).closest('[data-component="Formulario"]').length>0&&alert("b")},loadQueries:function(){var t=this;this.api.$dbq({schemaSyntax:"views",columns:["v_id","v_nombre","v_identificador","convert(char(10),v_fecha,103) as v_fecha","v_json"],orderbyColumns:["v_id"],language:"spanish",dbID:"circus"},(function(e){var a=e.map((function(t){var e=!1;try{e=JSON.parse(t.v_json),"object"!=Object(o["a"])(e)||null==e?e=!1:(e.customName=t.v_nombre,e.name=t.v_identificador,e.fecha=t.v_fecha,e.id=t.v_id)}catch(ja){}return e})),n=a.filter((function(t){return t})).map((function(e){var a=e.queryEditor.params,n=new vt(a,t.$store.state.queries),i=n.getWhereText();return{id:e.id,Nombre:e.customName,Identificador:e.name,Fecha:e.fecha,Tabla:e.tableNames[0].toUpperCase(),Columnas:e.queryEditor.params.map((function(t){return t.alias})).toString().replace(/,/g,", "),Condiciones:i}}));t.queries=_.reverse(n)}))},queriesRowClick:function(t){var e=this,a=t.Identificador;this.api.$dbq({schemaSyntax:"views",columns:["v_json"],whereSyntax:"v_identificador = '"+a+"'",language:"spanish",dbID:"circus"},(function(t){var a=t[0].v_json,n=JSON.parse(a);e.$store.state.selectedQuery=n}))},containersFromArea:function(t){var e=t.index,a=(this.containers.map((function(t,e){return{data:t,index:e}})),this.containers.filter((function(t,a){return-1!=t.data.areas.indexOf(e)})));return a},queriesTableOnChange:function(t){var e=t.rowIndex,a=t.key,n=t.value;switch(a){case"Descripcion":a="descripcion";break;case"Nombre":a="customName";break;case"Tipo":a="tipo";break}var i=this.queries[e];this.$store.commit("Query_setKey",{id:i.id,key:a,value:n})},queriesRowDelete:function(t){var e=this.queries[t].id;this.$store.commit("Query_delete",e);var a=JSON.cc(this.queries);a.splice(t,1),this.queries=a},panelSwitch:function(t){this.panels[t]=!this.panels[t]}},mounted:function(){var t=this.$store.state.database.help,e=(this.$refs.helpCuadrant,this);function a(e){var a=$(e.target),i=a.data("help-code");i||(a=a.closest('[data-help-code][data-help-code!=""]'),i=a.attr("data-help-code"));var r=i?t[i]:"",s="undefined"!=typeof r?r:i,o=$("<div/>").html(s),c=o.find("titulo").html();o.find("titulo").remove();var l=o.html();n({title:i?c:"&nbsp;",text:l})}function n(t,a){a&&window.log(t.text),"object"===Object(o["a"])(t)&&(t='<div style="height:100%;"/><titulo>'.concat(t.title,"</titulo><texto>").concat(t.text,"</texto></div>")),e.helpText=t,e.showHelpState=!0,window.circus.helpBoxCloseTimer&&clearTimeout(window.circus.helpBoxCloseTimer),window.circus.helpBoxCloseTimer=setTimeout((function(){return e.showHelpState=!1}),7e3)}function i(t){}function r(){window.circus.panels.form=!0,setTimeout((function(){$('[data-component="Formulario"]').find("input").eq(1).focus()}),100)}function s(){window.circus.panels.bottom=!0}window.log=function(t,a){var n=new Date,i=n.getTimezoneOffset(),r=new Date-i,s=(r.toLocaleString("en-GB",{timeZone:"UTC"}),{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",hour12:!1}),o=new Intl.DateTimeFormat("es-ES",s).format(n);e.logText.forEach((function(t,a){return e.logText[a]=t.replace("blink_me","")})),e.logText.unshift("".concat(o,'<br><span class="').concat(a,' blink_me">').concat(t,"</span>"))},window.contextDialog=function(t){e.contextDialog.props=t,e.contextDialog.show=!0},this.loadQueries(),t&&$(window.document).on("contextmenu",(function(t){return a(t),t.stopPropagation(),t.stopImmediatePropagation(),t.preventDefault(),!1})).on("click",(function(t){var a=$(t.target),n=a.closest(".context-dialog-container").length||a.closest("table.header").length;n||(e.contextDialog.show=!1)})),window.circus=this,window.circus.showHelpBox=n,window.showForm=r,window.showQueries=s,$(window).mousemove(i)},updated:function(){}},Ca=_a,Oa=(a("30ec"),Object(dt["a"])(Ca,r,s,!1,null,null,null)),$a=Oa.exports;i["a"].config.productionTip=!1,new i["a"]({render:function(t){return t($a)}}).$mount("#app");var Na=g.a.parse(location.search),Ta=Na.api;function La(){var t=Na.reset;t||(t="circus.json"),$.ajax({url:Ta+"writeFile",data:{json:localStorage["vuexStore"],fileName:t},method:"POST",success:function(e){console.log("tree saved!"),window.circus.showHelpBox({title:"Configuración Guardada",text:"Se ha guardado automáticamente la configuración actual en el archivo "+t})},error:function(t){console.log("error ajax ping")}})}setInterval(La,6e4)},"613a":function(t,e,a){"use strict";var n=a("613d"),i=a.n(n);i.a},"613d":function(t,e,a){},"69d0":function(t,e,a){},"71bb":function(t,e,a){},"77d5":function(t,e,a){},"90c6":function(t,e,a){},a16a:function(t,e,a){"use strict";var n=a("71bb"),i=a.n(n);i.a},c7ea:function(t,e,a){},d78f:function(t,e,a){},df46:function(t,e,a){"use strict";var n=a("c7ea"),i=a.n(n);i.a},f27c:function(t,e,a){},f8c1:function(t,e,a){}});
//# sourceMappingURL=app.6df0a93f.js.map